<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>K4YT3X's Hardened sysctl Configuration | Shenlong616</title><meta name=keywords content="sysctl,linux,centos,ubuntu,performance,security,kernel"><meta name=description content="K4YT3X's Hardened sysctl Configuration"><meta name=author content="k4yt3x"><link rel=canonical href=https://github.com/k4yt3x/sysctl><meta name=google-site-verification content="AzXCkO0tq4MO96bDYSrwJRKKCYqk92c1N2Yere6jdxc"><meta name=msvalidate.01 content="24E5C745EF8D6815F97FBCACA22956C9"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://shenlong616.github.io/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://shenlong616.github.io/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://shenlong616.github.io/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://shenlong616.github.io/favicon/apple-touch-icon.png><link rel=mask-icon href=https://shenlong616.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><style>@import "https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"</style><script defer src="/../../assets/js/nprogress.min.js?v=0.2.0"></script>
<script defer src="/../../assets/js/scrollreveal.min.js?v=4.0.9"></script>
<script defer src="/../../assets/js/SmoothScroll.min.js?v=3.14.1"></script><meta property="og:title" content="K4YT3X's Hardened sysctl Configuration"><meta property="og:description" content="K4YT3X's Hardened sysctl Configuration"><meta property="og:type" content="article"><meta property="og:url" content="https://shenlong616.github.io/posts/github/k4yt3x/sysctl/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-15T00:00:00+00:00"><meta property="article:modified_time" content="2021-10-15T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="K4YT3X's Hardened sysctl Configuration"><meta name=twitter:description content="K4YT3X's Hardened sysctl Configuration"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://shenlong616.github.io/posts/"},{"@type":"ListItem","position":2,"name":"GitHub","item":"https://shenlong616.github.io/posts/github/"},{"@type":"ListItem","position":3,"name":"K4YT3X's Hardened sysctl Configuration","item":"https://shenlong616.github.io/posts/github/k4yt3x/sysctl/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"K4YT3X's Hardened sysctl Configuration","name":"K4YT3X\u0027s Hardened sysctl Configuration","description":"K4YT3X's Hardened sysctl Configuration","keywords":["sysctl","linux","centos","ubuntu","performance","security","kernel"],"articleBody":"This repository hosts my hardened version of sysctl.conf. This configuration file aims to provide better security for Linux systems and improves system performance whenever possible. For example, below are some of the features this configuration file provides.\nPrevents kernel pointers from being read Disables Ptrace for all programs Disallows core dumping by SUID/GUID programs Disables IPv4/IPv6 routing Enables BBR TCP congestion control Enables SYN cookies to mitigate SYN flooding attacks Enables IP reverse path filtering for source validation … Please review the configuration file carefully before applying it. You are responsible for actions done to your system. If you need some guidance understanding what each of the settings is for, sysctl-explorer might come in handy. You may also consult Linux’s kernel documentation.\nAssumptions This configuration file is written with a few assumptions about your OS. You can still use this configuration as a template if your OS does not match these assumptions (e.g., set net.ipv4.ip_forward to 1 on a router). Making these assumptions helps us to develop a configuration file with the most number of optimizations enabled for common systems.\nSecurity is valued over performance and convenience The OS does not act as a router The OS is running on a 64-bit system The OS is on a network that is relatively stable (e.g., wired vs. LTE) No debugging features are required (e.g., no need for GDB/kdump) ICMP echo messages are not regarded as harmful Configuration Deployment Linux kernel configuration files are stored in the directory /etc/sysctl.d. Configurations in all files having a suffix of .conf will read by the procps (a.k.a. systemd-sysctl) service. Additionally, the procps service also loads configurations from the following directories.\n/run/sysctl.d /usr/local/lib/sysctl.d /usr/lib/sysctl.d /lib/sysctl.d Files are sorted and read by their file names in lexicographic order. Variables read later will overwrite variables read earlier. For example, configurations in 20-something.conf will be read before 99-sysctl.conf. If a variable exists in both files, values read from 20-something.conf will be overwritten by values read from 99-sysctl.conf.\n# in 20-something.conf\rnet.ipv4.ip_forward = 0\r# in 99-sysctl.conf\rnet.ipv4.ip_forward = 1\r# net.ipv4.ip_forward will be 1 Method 1: Deploy Definitively By default, on most Linux distributions, the /etc/sysctl.d/99-sysctl.conf file is a link to the /etc/sysctl.conf file. Therefore, you may write the variables into the /etc/sysctl.conf. However, since configuration files with a file name that starts with an alphabetical character sort later in the list than 99-sysctl.conf, the changes you make in the /etc/sysctl.conf might not be the final value loaded into the kernel. To make sure that your changes are loaded into the kernel, you would have to make sure that your configuration file’s name is lexicographically the last file in /etc/sysctl.d. The filename z-k4yt3x.conf will be used as an example in the code snippet below.\nThis deployment method is suitable for systems that do not expect to have their sysctl configurations updated from this repository anymore. Otherwise, the configuration file’s content has to be updated every time a new update form this repository is installed.\n# download the configuration file from GitHub using curl curl https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -o ~/sysctl.conf # you may also download with wget or other methods if curl is not available wget https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -O ~/sysctl.conf # move the configuration file into the sysctl configuration directory sudo mv ~/sysctl.conf /etc/sysctl.d/z-k4yt3x.conf # make sure the file has correct ownership and permissions sudo chown root:root /etc/sysctl.d/z-k4yt3x.conf sudo chmod 644 /etc/sysctl.d/z-k4yt3x.conf Method 2: Deploy as Template Alternatively, you can use this configuration file as a template. If you name the configuration file something akin to /etc/sysctl.d/98-k4yt3x.conf, you may overwrite values in this configuration file by giving them a new definition the /etc/sysctl.conf file.\nThe advantage of doing this is that you would not have to change this template file’s content every time it is updated in this repository. You can drop the template file in and make any modifications in /etc/sysctl.conf.\nThis method’s disadvantage is that values from this template might be overwritten by values in other configurations unknowingly. For example, a uhd-usrp2.conf exists on my system, and overwrites the value of net.core.rmem_max and net.core.wmem_max set in previous configuration files. Packages managers can install new configurations as you install a new package or update your system. Therefore, you will have to be careful that other files do not overwrite your variables.\n# download the configuration file from GitHub using curl curl https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -o ~/sysctl.conf # you may also download with wget or other methods if curl is not available wget https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -O ~/sysctl.conf # move the configuration file into the sysctl configuration directory sudo mv ~/sysctl.conf /etc/sysctl.d/98-k4yt3x.conf # make sure the file has correct ownership and permissions sudo chown root:root /etc/sysctl.d/98-k4yt3x.conf sudo chmod 644 /etc/sysctl.d/98-k4yt3x.conf Method 3: Custom Order (Personal Recommendation) To ensure that the configuration files are read in an order you prefer, you may also rename the files to your preference. For example, you can install this template to /etc/sysctl.d/y-k4yt3x.conf, then make a symbolic link from /etc/sysctl.d/z-sysctl.conf to /etc/sysctl.conf. This ensures that the two files are more likely to be read the last.\n# download the configuration file from GitHub using curl curl https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -o ~/sysctl.conf # you may also download with wget or other methods if curl is not available wget https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -O ~/sysctl.conf # move the configuration file into the sysctl configuration directory sudo mv ~/sysctl.conf /etc/sysctl.d/y-k4yt3x.conf # make sure the file has correct ownership and permissions sudo chown root:root /etc/sysctl.d/y-k4yt3x.conf sudo chmod 644 /etc/sysctl.d/y-k4yt3x.conf # point z-sysctl.conf to /etc/sysctl.conf sudo ln -s /etc/sysctl.conf /etc/sysctl.d/z-sysctl.conf Loading and Verifying the Changes For the changes to be effective, you will have to either reboot your machine or reload the configurations using one of the following commands.\n# instruct sysctl to load settings from the configuration file into the live kernel # this command allows you to see the variables as they are being loaded sudo sysctl --system # alternatively, you can restart the systemd-sysctl service on a system that uses systemd sudo systemctl restart systemd-sysctl # procps is an alias of systemd-sysctl # restarting either one of procps and systemd-sysctl would work sudo systemctl restart procps Afterwards, you may verify your changes by dumping all kernel variables. Replace your.config in the following command with the name of the variable you would like to check.\nsudo sysctl -a | grep \"your.config\" For example, the following command prints the value of kernel.kptr_restrict.\n$ sudo sysctl -a | grep \"kernel.kptr_restrict\" kernel.kptr_restrict = 2 Short URL for Downloading sysctl.conf For convenience, I have pointed the URL https://k4t.io/sysctl to the sysctl.conf file. You may therefore download the sysctl.conf file with the following command. However, be sure to check the file’s integrity after downloading it if you choose to download using this method.\ncurl -L k4t.io/sysctl -o sysctl.conf Others sysctl.conf ","wordCount":"1114","inLanguage":"en","datePublished":"2021-10-15T00:00:00Z","dateModified":"2021-10-15T00:00:00Z","author":{"@type":"Person","name":"k4yt3x"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://shenlong616.github.io/posts/github/k4yt3x/sysctl/"},"publisher":{"@type":"Person","name":"Shenlong616","logo":{"@type":"ImageObject","url":"https://shenlong616.github.io/favicon/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://shenlong616.github.io/ accesskey=h title="Shenlong616 (Alt + H)">Shenlong616</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://shenlong616.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://shenlong616.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://shenlong616.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://shenlong616.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://shenlong616.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://shenlong616.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://shenlong616.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://shenlong616.github.io/posts/github/>GitHub</a></div><h1 class=post-title>K4YT3X's Hardened sysctl Configuration</h1><div class=post-description>K4YT3X's Hardened sysctl Configuration</div><div class=post-meta><span title='2021-10-15 00:00:00 +0000 UTC'>October 15, 2021</span>&nbsp;·&nbsp;1114 words&nbsp;·&nbsp;k4yt3x&nbsp;|&nbsp;<a href=https://github.com/Shenlong616/Shenlong616.github.io/tree/main/_hugo/content/posts/github/k4yt3x/sysctl.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
&nbsp;|&nbsp;<span>Originally published at&nbsp;<a href=https://github.com/k4yt3x/sysctl title=https://github.com/k4yt3x/sysctl target=_blank rel="noopener noreferrer">github.com</a></span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#assumptions aria-label=Assumptions>Assumptions</a></li><li><a href=#configuration-deployment aria-label="Configuration Deployment">Configuration Deployment</a><ul><li><a href=#method-1-deploy-definitively aria-label="Method 1: Deploy Definitively">Method 1: Deploy Definitively</a></li><li><a href=#method-2-deploy-as-template aria-label="Method 2: Deploy as Template">Method 2: Deploy as Template</a></li><li><a href=#method-3-custom-order-personal-recommendation aria-label="Method 3: Custom Order (Personal Recommendation)">Method 3: Custom Order (Personal Recommendation)</a></li></ul></li><li><a href=#loading-and-verifying-the-changes aria-label="Loading and Verifying the Changes">Loading and Verifying the Changes</a></li><li><a href=#short-url-for-downloading-sysctlconf aria-label="Short URL for Downloading sysctl.conf">Short URL for Downloading <code>sysctl.conf</code></a></li><li><a href=#others aria-label=Others>Others</a></li></ul></div></details></div><div class=post-content><p>This repository hosts my hardened version of <code>sysctl.conf</code>. This configuration file aims to provide better security for Linux systems and improves system performance whenever possible. For example, below are some of the features this configuration file provides.</p><ul><li>Prevents kernel pointers from being read</li><li>Disables Ptrace for all programs</li><li>Disallows core dumping by SUID/GUID programs</li><li>Disables IPv4/IPv6 routing</li><li>Enables BBR TCP congestion control</li><li>Enables SYN cookies to mitigate SYN flooding attacks</li><li>Enables IP reverse path filtering for source validation</li><li>&mldr;</li></ul><p><strong>Please review the configuration file carefully before applying it.</strong> You are responsible for actions done to your system. If you need some guidance understanding what each of the settings is for, <a href=https://sysctl-explorer.net/>sysctl-explorer</a> might come in handy. You may also consult <a href=https://www.kernel.org/doc/Documentation/sysctl/>Linux&rsquo;s kernel documentation</a>.</p><h2 id=assumptions>Assumptions<a hidden class=anchor aria-hidden=true href=#assumptions>#</a></h2><p>This configuration file is written with a few assumptions about your OS. You can still use this configuration as a template if your OS does not match these assumptions (e.g., set <code>net.ipv4.ip_forward</code> to <code>1</code> on a router). Making these assumptions helps us to develop a configuration file with the most number of optimizations enabled for common systems.</p><ul><li>Security is valued over performance and convenience</li><li>The OS does not act as a router</li><li>The OS is running on a 64-bit system</li><li>The OS is on a network that is relatively stable (e.g., wired vs. LTE)</li><li>No debugging features are required (e.g., no need for GDB/kdump)</li><li>ICMP echo messages are not regarded as harmful</li></ul><h2 id=configuration-deployment>Configuration Deployment<a hidden class=anchor aria-hidden=true href=#configuration-deployment>#</a></h2><p>Linux kernel configuration files are stored in the directory <code>/etc/sysctl.d</code>. Configurations in all files having a suffix of <code>.conf</code> will read by the <code>procps</code> (a.k.a. <code>systemd-sysctl</code>) service. Additionally, the <code>procps</code> service also loads configurations from the following directories.</p><ul><li><code>/run/sysctl.d</code></li><li><code>/usr/local/lib/sysctl.d</code></li><li><code>/usr/lib/sysctl.d</code></li><li><code>/lib/sysctl.d</code></li></ul><p>Files are sorted and read by their file names in lexicographic order. Variables read later will overwrite variables read earlier. For example, configurations in <code>20-something.conf</code> will be read before <code>99-sysctl.conf</code>. If a variable exists in both files, values read from <code>20-something.conf</code> will be overwritten by values read from <code>99-sysctl.conf</code>.</p><pre tabindex=0><code class=language-properties data-lang=properties># in 20-something.conf
net.ipv4.ip_forward = 0

# in 99-sysctl.conf
net.ipv4.ip_forward = 1

# net.ipv4.ip_forward will be 1
</code></pre><h3 id=method-1-deploy-definitively>Method 1: Deploy Definitively<a hidden class=anchor aria-hidden=true href=#method-1-deploy-definitively>#</a></h3><p>By default, on most Linux distributions, the <code>/etc/sysctl.d/99-sysctl.conf</code> file is a link to the <code>/etc/sysctl.conf</code> file. Therefore, you may write the variables into the <code>/etc/sysctl.conf</code>. However, since configuration files with a file name that starts with an alphabetical character sort later in the list than <code>99-sysctl.conf</code>, the changes you make in the <code>/etc/sysctl.conf</code> might not be the final value loaded into the kernel. To make sure that your changes are loaded into the kernel, you would have to make sure that your configuration file&rsquo;s name is lexicographically the last file in <code>/etc/sysctl.d</code>. The filename <code>z-k4yt3x.conf</code> will be used as an example in the code snippet below.</p><p>This deployment method is suitable for systems that do not expect to have their sysctl configurations updated from this repository anymore. Otherwise, the configuration file&rsquo;s content has to be updated every time a new update form this repository is installed.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># download the configuration file from GitHub using curl</span>
</span></span><span class=line><span class=cl>curl https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -o ~/sysctl.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># you may also download with wget or other methods if curl is not available</span>
</span></span><span class=line><span class=cl>wget https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -O ~/sysctl.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># move the configuration file into the sysctl configuration directory</span>
</span></span><span class=line><span class=cl>sudo mv ~/sysctl.conf /etc/sysctl.d/z-k4yt3x.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># make sure the file has correct ownership and permissions</span>
</span></span><span class=line><span class=cl>sudo chown root:root /etc/sysctl.d/z-k4yt3x.conf
</span></span><span class=line><span class=cl>sudo chmod <span class=m>644</span> /etc/sysctl.d/z-k4yt3x.conf
</span></span></code></pre></div><h3 id=method-2-deploy-as-template>Method 2: Deploy as Template<a hidden class=anchor aria-hidden=true href=#method-2-deploy-as-template>#</a></h3><p>Alternatively, you can use this configuration file as a template. If you name the configuration file something akin to <code>/etc/sysctl.d/98-k4yt3x.conf</code>, you may overwrite values in this configuration file by giving them a new definition the <code>/etc/sysctl.conf</code> file.</p><p>The advantage of doing this is that you would not have to change this template file&rsquo;s content every time it is updated in this repository. You can drop the template file in and make any modifications in <code>/etc/sysctl.conf</code>.</p><p>This method&rsquo;s disadvantage is that values from this template might be overwritten by values in other configurations unknowingly. For example, a <code>uhd-usrp2.conf</code> exists on my system, and overwrites the value of <code>net.core.rmem_max</code> and <code>net.core.wmem_max</code> set in previous configuration files. Packages managers can install new configurations as you install a new package or update your system. Therefore, you will have to be careful that other files do not overwrite your variables.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># download the configuration file from GitHub using curl</span>
</span></span><span class=line><span class=cl>curl https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -o ~/sysctl.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># you may also download with wget or other methods if curl is not available</span>
</span></span><span class=line><span class=cl>wget https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -O ~/sysctl.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># move the configuration file into the sysctl configuration directory</span>
</span></span><span class=line><span class=cl>sudo mv ~/sysctl.conf /etc/sysctl.d/98-k4yt3x.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># make sure the file has correct ownership and permissions</span>
</span></span><span class=line><span class=cl>sudo chown root:root /etc/sysctl.d/98-k4yt3x.conf
</span></span><span class=line><span class=cl>sudo chmod <span class=m>644</span> /etc/sysctl.d/98-k4yt3x.conf
</span></span></code></pre></div><h3 id=method-3-custom-order-personal-recommendation>Method 3: Custom Order (Personal Recommendation)<a hidden class=anchor aria-hidden=true href=#method-3-custom-order-personal-recommendation>#</a></h3><p>To ensure that the configuration files are read in an order you prefer, you may also rename the files to your preference. For example, you can install this template to <code>/etc/sysctl.d/y-k4yt3x.conf</code>, then make a symbolic link from <code>/etc/sysctl.d/z-sysctl.conf</code> to <code>/etc/sysctl.conf</code>. This ensures that the two files are more likely to be read the last.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># download the configuration file from GitHub using curl</span>
</span></span><span class=line><span class=cl>curl https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -o ~/sysctl.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># you may also download with wget or other methods if curl is not available</span>
</span></span><span class=line><span class=cl>wget https://raw.githubusercontent.com/k4yt3x/sysctl/master/sysctl.conf -O ~/sysctl.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># move the configuration file into the sysctl configuration directory</span>
</span></span><span class=line><span class=cl>sudo mv ~/sysctl.conf /etc/sysctl.d/y-k4yt3x.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># make sure the file has correct ownership and permissions</span>
</span></span><span class=line><span class=cl>sudo chown root:root /etc/sysctl.d/y-k4yt3x.conf
</span></span><span class=line><span class=cl>sudo chmod <span class=m>644</span> /etc/sysctl.d/y-k4yt3x.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># point z-sysctl.conf to /etc/sysctl.conf</span>
</span></span><span class=line><span class=cl>sudo ln -s /etc/sysctl.conf /etc/sysctl.d/z-sysctl.conf
</span></span></code></pre></div><h2 id=loading-and-verifying-the-changes>Loading and Verifying the Changes<a hidden class=anchor aria-hidden=true href=#loading-and-verifying-the-changes>#</a></h2><p>For the changes to be effective, you will have to either reboot your machine or reload the configurations using one of the following commands.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># instruct sysctl to load settings from the configuration file into the live kernel</span>
</span></span><span class=line><span class=cl><span class=c1># this command allows you to see the variables as they are being loaded</span>
</span></span><span class=line><span class=cl>sudo sysctl --system
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># alternatively, you can restart the systemd-sysctl service on a system that uses systemd</span>
</span></span><span class=line><span class=cl>sudo systemctl restart systemd-sysctl
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># procps is an alias of systemd-sysctl</span>
</span></span><span class=line><span class=cl><span class=c1># restarting either one of procps and systemd-sysctl would work</span>
</span></span><span class=line><span class=cl>sudo systemctl restart procps
</span></span></code></pre></div><p>Afterwards, you may verify your changes by dumping all kernel variables. Replace <code>your.config</code> in the following command with the name of the variable you would like to check.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo sysctl -a <span class=p>|</span> grep <span class=s2>&#34;your.config&#34;</span>
</span></span></code></pre></div><p>For example, the following command prints the value of <code>kernel.kptr_restrict</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo sysctl -a <span class=p>|</span> grep <span class=s2>&#34;kernel.kptr_restrict&#34;</span>
</span></span><span class=line><span class=cl>kernel.kptr_restrict <span class=o>=</span> <span class=m>2</span>
</span></span></code></pre></div><h2 id=short-url-for-downloading-sysctlconf>Short URL for Downloading <code>sysctl.conf</code><a hidden class=anchor aria-hidden=true href=#short-url-for-downloading-sysctlconf>#</a></h2><p>For convenience, I have pointed the URL <code>https://k4t.io/sysctl</code> to the <code>sysctl.conf</code> file. You may therefore download the <code>sysctl.conf</code> file with the following command. However, be sure to check the file&rsquo;s integrity after downloading it if you choose to download using this method.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>curl -L k4t.io/sysctl -o sysctl.conf
</span></span></code></pre></div><h2 id=others>Others<a hidden class=anchor aria-hidden=true href=#others>#</a></h2><ol><li><a href=/../assets/files/sysctl.conf>sysctl.conf</a></li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://shenlong616.github.io/tags/sysctl/>sysctl</a></li><li><a href=https://shenlong616.github.io/tags/linux/>linux</a></li><li><a href=https://shenlong616.github.io/tags/centos/>centos</a></li><li><a href=https://shenlong616.github.io/tags/ubuntu/>ubuntu</a></li><li><a href=https://shenlong616.github.io/tags/performance/>performance</a></li><li><a href=https://shenlong616.github.io/tags/security/>security</a></li><li><a href=https://shenlong616.github.io/tags/kernel/>kernel</a></li></ul><nav class=paginav><a class=prev href=https://shenlong616.github.io/posts/undefined/hometown/><span class=title>« Prev</span><br><span>Hometown</span></a>
<a class=next href=https://shenlong616.github.io/posts/undefined/next-t-rea/><span class=title>Next »</span><br><span>Next t*reaФ_Ф</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://shenlong616.github.io/>Shenlong616</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>document.addEventListener("DOMContentLoaded",()=>{const e=e=>{NProgress.set(e),NProgress.done(!0)};if(e(.1),document.getElementsByTagName("input").length>0)for(const t of document.getElementsByTagName("input"))t.addEventListener("input",()=>{e(.1)});else void this;if(document.querySelectorAll(".copy-code, .top-link, #theme-toggle").length>0)for(const t of document.querySelectorAll(".copy-code, .top-link, #theme-toggle, .anchor"))t.addEventListener("click",()=>{e(.1)});else void this;const t=e=>e[Math.floor(Math.random()*e.length)];if(ScrollReveal().noop)void this;else{const e={desktop:!0,mobile:!1,delay:0,duration:300,easing:"ease-out",reset:!0,distance:"6.16%",origin:"bottom",delay:0,beforeReveal:()=>{},afterReveal:()=>{}},n=()=>{const e=document.createElement("span"),n=document.createTextNode(`${Object.values(t([{Bengali:"নমস্কার!"},{boro:"खुलुम्बाइ!"},{Bulgarian:"Здравей!"},{Chinese:"你好!"},{Croat:"Zdravo!"},{Czech:"Ahoj!"},{Danish:"Hej!"},{Dutch:"Hallo!"},{English:"Hello!"},{Esperanto:"Saluton!"},{Estnisch:"Tere!"},{Farsi:"Salam!"},{Fidschi:"Bula!"},{Finnish:"Terve!"},{Flemish:"Hallo!"},{French:"Salut!"},{Greek:"Γειά!"},{Hawaiian:"Aloha!"},{Hebrew:"!שלום"},{Hindi:"नमस्ते!"},{Italian:"Ciao!"},{Japanese:"こんにちは!"},{Khmer:"Tchum-reaup Suw!"},{Korean:"안영하세요!"},{Lettish:"Čau!"},{Lithuanian:"Labas!"},{Malaiisch:"Hai!"},{Mongolian:"Сайн уу!"},{Norwegian:"Hei!"},{Polish:"Cześć!"},{Portuguese:"Olá!"},{Rumanian:"Salut!"},{Russian:"Привет!"},{Slovak:"Ahoj!"},{Spanish:"Hola!"},{Swedish:"Hej!"},{Swiss_German:"Hoi!"},{Tamil_Nadu:"வணக்கம்!"},{Thai:"สวัสดีคะ!"},{Turkish:"Merhaba!"},{Vietnamese:"Xin Chào!"}]))[0]}`);e.appendChild(n),Object.assign(e.style,{color:"var(--secondary)",fontSize:"0.789em"}),document.querySelector(".logo").appendChild(e)};n(),ScrollReveal().reveal(document.querySelectorAll(".logo")[0].childNodes[0],{...e}),ScrollReveal().reveal(document.querySelectorAll(".logo")[0].childNodes[1],{...e,delay:e.delay+=25}),ScrollReveal().reveal(document.querySelectorAll(".logo")[0].childNodes[2],{...e,delay:e.delay+=25});for(const t of document.querySelectorAll("ul#menu")[0].childNodes)ScrollReveal().reveal(t,{...e,delay:e.delay+=25,origin:"left"})}async function n(){const e=await fetch("/../../assets/js/json/quotes.json?v=0.3.2"),n=await e.json();if(e.ok){const e=t(n);document.getElementsByName("quoteAuthor")[0].textContent=e.author,document.getElementsByName("quoteContent")[0].textContent=e.content}else void this}document.getElementsByName("quoteAuthor")[0]===void 0&&document.getElementsByName("quoteContent")[0]===void 0?void this:n()})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>