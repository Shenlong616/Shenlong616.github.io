<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Python 3 tricks | Shenlong616</title><meta name=keywords content="python,python3,python tricks,python tips"><meta name=description content="Some cool Python tricks"><meta name=author content="alexghergh"><link rel=canonical href=https://github.com/alexghergh/python-tricks><meta name=google-site-verification content="AzXCkO0tq4MO96bDYSrwJRKKCYqk92c1N2Yere6jdxc"><meta name=msvalidate.01 content="24E5C745EF8D6815F97FBCACA22956C9"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://shenlong616.github.io/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://shenlong616.github.io/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://shenlong616.github.io/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://shenlong616.github.io/favicon/apple-touch-icon.png><link rel=mask-icon href=https://shenlong616.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><style>@import "https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"</style><script defer src="/../../assets/js/nprogress.min.js?v=0.2.0"></script>
<script defer src="/../../assets/js/scrollreveal.min.js?v=4.0.9"></script>
<script defer src="/../../assets/js/SmoothScroll.min.js?v=3.14.1"></script><meta property="og:title" content="Python 3 tricks"><meta property="og:description" content="Some cool Python tricks"><meta property="og:type" content="article"><meta property="og:url" content="https://shenlong616.github.io/posts/github/alexghergh/python-tricks/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-07-14T00:00:00+00:00"><meta property="article:modified_time" content="2020-07-14T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python 3 tricks"><meta name=twitter:description content="Some cool Python tricks"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://shenlong616.github.io/posts/"},{"@type":"ListItem","position":2,"name":"GitHub","item":"https://shenlong616.github.io/posts/github/"},{"@type":"ListItem","position":3,"name":"Python 3 tricks","item":"https://shenlong616.github.io/posts/github/alexghergh/python-tricks/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Python 3 tricks","name":"Python 3 tricks","description":"Some cool Python tricks","keywords":["python","python3","python tricks","python tips"],"articleBody":"Disclaimer: This list is meant as a comprehension of cool tips and tricks I found on the internet. If you would like to contribute, or notice any mistakes or typos, please contact me or upload a pull request. If you think any material here can be considered personal property let me know and I will take it down.\nLooping over a range of numbers Using range() is better than using a list (ex. [1, 2, 3]), because the list takes up memory space, whereas the range() function generates values on demand, thus taking a fixed amount of memory whatever the size of the elements is:\nfor i in range(10): print(i**2) takes the same memory space as:\nfor i in range(100000): print(i**2) Note: This function used to create a list in python2, and xrange() used to do what range() currently does, but it got changed, so range() in python3 is xrange() in python2.\nLooping backwards Use the function reversed():\nlangs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] for lang in reversed(langs): print(lang) # prints rust, kotlin, c++, java, python, c Looping over a collection and indices Use the function enumerate():\nlangs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] for i,lang in enumerate(langs): print(f'{i} --\u003e {lang}') # prints # 0 --\u003e c # 1 --\u003e python # 2 --\u003e java # 3 --\u003e c++ # 4 --\u003e kotlin # 5 --\u003e rust Looping over two collections Use the function zip(). It returns tuples of the elements until one of the iterables is exahusted:\nlangs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] numbers = [1, 2, 3] for number, lang in zip(numbers, langs): print(f'{number} --\u003e {lang}') # prints # 1 --\u003e c # 2 --\u003e python # 3 --\u003e java Note: It takes any number of iterables and “zips” them into tuples.\nNote 2: It’s important to note that it generates tuples on demand, so it reuses memory space (it used to create a third list in python2, and izip() used to do what zip() does now in python3).\nLooping in sorted order Use the function sorted() or the method sort() of iterables.\nBy default, it sorts the iterable in ascending order:\nlangs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] for lang in sorted(langs): print(lang) # or langs.sort() print(*langs) # prints c c++ java kotlin python rust The second method sorts the iterable IN-PLACE, whilst the first returns a different iterable.\nBoth the functions can take 2 extra parameters which can specify a comparison function and if the iterable should be reversed:\nlangs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] for lang in sorted(langs, key=len, reverse=True): print(lang) # or langs.sort(key=len, reverse=True) print(*langs) # prints kotlin python java rust c++ c # notice that kotlin and python might be interchanged because they have the same size, same java and rust Partial functions A partial function is a function who has some parameters “frozen”, in the sense that they are preset. The other parameters must be given when the partial function is called:\nfrom functools import partial def func(x, y, z): return x + 2*y + 3*z my_func = partial(func, 2, 3) # assign (preset) 2 to x, 3 to y my_func(3) # equivalent to func(2, 3, 3) # prints 17 my_func(4) # equivalent to func(2, 3, 4) # prints 20 Fastest way to format multiple strings Going from fastest to slowest, they are:\nf'{s} {t}' # fastest s + ' ' + t ' '.join((s, t)) '%s %s' % (s, t) '{} {}'.format(s, t) Template('$s $t').substitute(s=s, t=t) # slowest Note: f-strings were added in Python 3.6.\nIterating until a sentinel value This method has 2 forms:\niter(iterable) - this form simply returns an iterator from the iterable. You can call next() on the iterator and iterate through the iterable. langs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] ir = iter(langs) print(next(ir)) # prints c print(next(ir)) # prints python iter(callable, sentinel) - this form executes the function callable until it returns sentinel value. def func(langs = []): langs.append('c') return len(langs) ir = iter(func, 5) next(ir) # prints 1 next(ir) # prints 2 next(ir) # prints 3 next(ir) # prints 4 next(ir) # raise StopIteration Read 80 characters from file f into line and append to text until f.read() returns '':\ntext = list() for line in iter(partial(f.read, 80), ''): text.append(line) For else in Python Search a certain value in an iterable and do something if it is not there:\nlangs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] for lang in langs: if lang == 'scala': print('We found Scala!') break else: print('Scala is not in the list...') Note: Careful if you ever come back to this kind of code. Don’t indent the else statement by accident!!!\nLooping over dictionary keys d = { 'foo': 'c', 'bar': 'java', 'baz': 'rust' } # cannot mutate dictionary here for k in d: print(k) # free to mutate the keys and values for k in list(d.keys()): if k == 'foo': del d[k] Note: d.keys() used to make a list copy of the keys, so there was no problem iterating and mutating the original dictionary at the same time. In modern Python3, d.keys() returns an iterable and can no longer be used to iterate and mutate a dictionary at the same time. To go around this, just wrap the method into a list as in the example.\nNote 2: There is an ‘alternative’ to this, but it has worse performance and memory usage:\nd = { 'foo': 'c', 'bar': 'java', 'baz': 'rust' } # Don't do this, performance is bad as it copies every element in a dictionary and can be really bad for really big dictionaries s = {k: v for k, v in d.items() if k != 'foo'} Looping over dictionary keys and values d = { 'foo': 'c', 'bar': 'java', 'baz': 'rust' } for k, v in d.items(): print(f'{k} --\u003e {v}') The items() method returns and iterator, so it uses the same amount of memory no matter how big the dictionary is.\nNote: In python2, the items() method used to return a list of tuples, and the iteritems() used to do what items() does now in python3.\nConstruct a dictionary from 2 iterables Use the zip() method to pack 2 iterables into a zip object, then use the dict() method to make that into a dictionary.\nlangs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] colors = ['blue', 'green', 'red'] d = dict(zip(langs, colors)) print(d) # prints {'c': 'blue', 'python': 'green', 'java': 'red'} s = dict(enumerate(colors)) print(s) # prints {1: 'blue', 2: 'green', 3: 'red'} Populating a dictionary with default data (Counting with dictionary) Use the defaultdict() method imported from collections. When a key is not in the dictionary, it creates a new key that has the default value.\nfrom collections import defaultdict colors = ['red', 'green', 'red', 'blue', 'green', 'red'] d = defaultdict(int) for color in colors: d[color] += 1 print(dict(d)) # prints {'blue': 1, 'green': 2, 'red': 3} Note: This is a faster approach than setdefault() on most cases and faster than get() in all cases. Also, defaultdict() seems to work faster on native types like int or string and slower on dict or list. That being said, there are times when you cannot use defaultdict() and have to use either setdefault() or get(), for example when the default value of a certain key depends on the key itself, so defaultdict() cannot be used from the beginning to have a default value for every new key.\ncolors = ['red', 'green', 'red', 'blue', 'green', 'red'] d = {} for color in colors: d[color] = d.setdefault(color, 2 if color == 'red' else 0) + 1 print(d) # prints {'blue': 1, 'green': 2, 'red': 5} Note 2: A case where get() accomplishes nicely what setdefault() and defaultdict() would do in a more complicated manner is when you have to return a default value from a dictionary if the key is not in it.\nd = { 1: 'Alice', 2: 'Bob', 3: 'Carla' } def hello(id): return f'Hi, {d.get(id, \"random person\")}' print(hello(1)) # prints Hi, Alice print(hello(4)) # prints Hi, random person Creating a list with n elements Say you want to create a list with 100 elements of 0. You can just do:\nlst = [0] * 100 print(lst) Ternary operator in Python This:\n#include int main() { int x; int y = 1; x = (y == 1 ? 1 : 0); printf(\"%d\", x); return 0; } can be written like this in python:\ny = 1 x = (1 if y == 1 else 0) print(x) Grouping data with dictionaries Say you want to group the items in a list based on some comparison function, for example len():\nfrom collections import defaultdict names = ['julia', 'mark', 'thomas', 'rachel', 'alex', 'maria'] d = defaultdict(list) for name in names: key = len(name) d[key].append(name) print(dict(d)) # prints {5: ['julia', 'maria'], 4: ['mark', 'alex'], 6: ['thomas', 'rachel']} All you have to do to group based on some other function is change the key to something else.\nUnpacking sequences p = 'alex', 'blue', 20, 'c' # same as p = ('alex', 'blue', 20, 'c') name, color, age, lang = p print(p) # prints a tuple - ('alex', 'blue', 20, 'c') print(name, color, age, lang) # prints alex blue 20 c Note: In the same manner, swapping 2 variables in python might be the most elegant way out of all the languages:\nx, y = 1, 2 # swap x and y x, y = y, x print(x, y) # prints 2 1 Concatenating strings Use the join() method to concatenate strings from an iterable.\nlangs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] # join the strings from langs, having ', ' as separator text = ', '.join(langs) print(text) # prints c, python, java, c++, kotlin, rust Atomicity of builtin data types Most (!not all) of the builtin data types methods are implemented using C function calls, so that makes it atomic.\nFor a better explanaton check here.\nAlso, dictionaries’ popitem() is atomic, while pop() may not, based on the key type (if the key is not a builtin data type, Python has to call that object’s __hash__() implementation), so better use popitem() where atomicity is needed.\nd = { 'foo': 'c', 'bar': 'java', 'baz': 'rust' } while d: key, value = d.popitem() print(f'{key} --\u003e {value}') # prints # foo --\u003e c # bar --\u003e java # baz --\u003e rust # d is empty at the end Note: If unsure, don’t hesitate to use mutexes!\nLinking and overriding dictionaries with defaults When you have a dictionary that has some default values and you want to override it with another dictionary, use ChainMap(). ChainMap() has the advantage that it doesn’t copy anything, it just “links” the dictionaries, using the initial memory (this also means that any change in the initial dictionary will be reflected in the ChainMap() as well).\nfrom collections import ChainMap defaults = { 'bar': 'c', 'foo': 'java' } overwritten = { 'foo': 'rust', 'barn': 'c++' } d = ChainMap(overwritten, defaults) print(dict(d)) # prints {'foo': 'rust', 'barn': 'c++', 'bar': 'c'} Note: Don’t use copy() and then update(), it is really bad performance-wise and can be replaced in 99% of the cases by a ChainMap().\nd1 = { 'bar': 'c', 'foo': 'java' } d2 = { 'foo': 'rust', 'barn': 'c++' } # Don't do this!! d = d1.copy() d.update(d2) Note 2: For a better example when this is useful, see this.\nOrdered dictionary A dictionary is not guaranteed to preserve the order of insertion. It actually optimizes keys for faster lookup. However there is one way to have a dictionary preserve insertion order, using OrderedDict() from collections.\nfrom collections import OrderedDict d = OrderedDict() d['bar'] = 'c' d['foo'] = 'java' d['baz'] = 'rust' print(dict(d)) # prints {'bar': 'c', 'foo': 'java', 'baz': 'rust'} Note: Since Python 3.7, regular dicts have guaranteed ordering. More here. Note however that they don’t completely replace OrderedDicts, since they have extra features:\nfrom collections import OrderedDict a = {1: 1, 2: 2} b = {2: 2, 1: 1} c = OrderedDict(a) d = OrderedDict(b) print(a == b) # returns True print(c == d) # returns False since OrderedDicts are order-sensitive, and regular dicts are not Also, OrderedDicts have methods to change order of elements, while regular dicts don’t.\nUsing deque instead of a list when updating Deques (double ended queues) are really fast in python3. They are implemented using doubly-linked lists, so inserting and removing at the end or at the beginning is O(1) complexity. Lists are implemented as normal arrays, so they have to sometimes realloc() to accomodate for the number of elements (only sometimes because by default it realloc()s more memory at the time than necessary’), so that makes them have O(n) complexity when inserting or removing at the beginning because they have to copy the rest of the elements.\nGenerally, updating a sequence is MUCH faster when using a deque() as opposed to using a list() (though keep in mind that accessing a random element in a deque() is expensive, whereas accessing a random element in a list() is O(1)).\nfrom collections import deque # Wrong! langs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] del langs[0] langs.pop(0) langs.insert(0, 'scala') # Right! langs = deque(['c', 'python', 'java', 'c++', 'kotlin', 'rust']) del langs[0] langs.popleft(0) langs.appendleft(0, 'scala') Temporary contexts Usually there is the case that code like this is written in other languages:\nfrom decimal import getcontext, setcontext old_context = getcontext().copy() getcontext().prec = 50 print(Decimal(355) / Decimal(113)) setcontext(old_context) This can easily be replaced with contexts:\nfrom decimal import localcontext, Context with localcontext(Context(prec=50)): print(Decimal(355) / Decimal(113)) Other examples:\nWriting or reading from file f = open('data.txt') try: data = f.read() # do something with data finally: f.close() can be replaced with:\nwith open('data.txt') as f: data = f.read() # do something with data Deleting a file (getting rid of the try-except-pass idiom): try: os.remove('sometempfile.tmp') except OSError: pass can be replaced with:\nfrom contextlib import suppress with suppress(FileNotFoundError): os.remove('sometempfile.tmp') Note: suppress() is a reentrant context manager. More info here.\nUsing a lock lock = threading.Lock() lock.acquire() try: # critical section finally: lock.release() can be replaced with:\nlock = threading.Lock() with lock: # critical section Note: For reentrant lock context manager, see threading.RLock.\nRedirecting output from stdout to file with open('help.txt', 'w') as f: sldstdout = sys.stdout sys.stdout = f try: help(pow) finally: sys.stdout = oldstdout can be replaced with:\nwith open('help.txt', 'w') as f: with redirect_stdout(f): help(pow) Note: redirect_stdout() is also a reentrant context manager.\nMore on context managers here.\nUsing the cache for optimized function calls For example, looking up a webpage numerous times is expensive, and usually the result is the same. So use the lru_cache() decorator:\nfrom functools import lru_cache @lru_cache def web_lookup(url): return urllib.urlopen(url).read() More can be found here.\nTest a sequence or generator for truthness Using the any() function, you can check if at least one value in the iterable is True. It applies the bool() function to every element.\nfalse_lst = [0, False, '', 0.0, [], {}, None] # all of these return False when using bool() on them print(any(false_lst)) # prints False true_lst = [1, True, 'x', 3.14, ['x'], {'a': 'b'}] # all of these return True when using bool() on them print(any(true_lst)) # prints True falst_lst.append(-1) # any integer different from 0 is considered True print(any(false_lst)) # prints True Note: This function shortcircuits, meaning the first time it finds True it returns; it does NOT check for the rest of the values to be True.\nNote 2: It is really useful with generators:\nprint(any(range(1000000)) # prints True after 2 values evaluated, as range() is a generator print(any([range(1000000)])) # prints True after the whole list of 1000000 elements has been initialized, as range() has to populate the list first There is another function, all(), that does what it says: it tests for all the elements in the sequence to be True, and works much in the same way as any().\nUse namedtuples instead of tuples Aside from the fact that namedtuple()s are more verbose, they also offer better usage, as they can be treated as regular tuples, classes or even dictionaries.\nFor example, having a point:\npt1 = (2, 3) print(pt1[0], pt1[1]) # prints 2 3 can be replaced with the better alternative namedtuple():\nfrom collections import namedtuple Point = namedtuple('Point', 'x y') # a tuple named 'Point' with attributes 'x' and 'y' # alternatively this means the exact same thing # Point = namedtuple('Point', ['x', 'y']) pt1 = Point(2, 3) print(pt1) # prints Point(x=2, y=3) print(pt1.x, pt1.y) # prints 2 3 print(pt1[0], pt1[1]) # prints 2 3 print(dict(pt1._asdict())) # prints {'x': 2, 'y': 3} print(pt1._replace(x=50)) # prints Point(x=50, y=3) # Note however that _replace() returns a modified copy. The original is still a tuple, so it cannot be modified Another common example:\nfrom collections import namedtuple Person = namedtuple('Person', 'age color lang') person = Person(31, 'blue', 'c') print(person) # prints Person(age=31, color='blue', lang='c') Note: When the values from a namedtuple() are invalid (e.g. having one of the fields named class or having the same field twice), it throws a ValueError. To avoid this you can possibly provide a third parameter named rename. If set to True, it will rename the field that is incorrect.\nfrom collections import namedtuple Person = namedtuple('Person', 'age color age', rename=True) print(Person(31, 'blue', 'whatever')) # prints Person(age=31, color='blue', _2='whatever') Note 2: Since Python 3.8, _asdict() method returns a regular dictionary, as regular dicts now have guaranteed ordering based on insertion (since Python 3.7).\nProfiling code with cProfile Since Python 3.8, cProfile can be used as a context manager, making it extremely easy to profile code.\nimport cProfile with cProfile.Profile() as profiler: # code to be profiled profiler.print_stats() Pretty print stuff One way to format the output is to use the pprint module.\nfrom pprint import pprint d = { 'b': [*range(5)], 'c': [] 'a': \"Here is a long string\".split(\" \"), } pprint(d, indent=2, width=20, compact=True) # prints # { 'a': [ 'Here', # 'is', 'a', # 'long', # 'string'], # 'b': [ 0, 1, 2, 3, # 4], # 'c': []} Note: Since Python 3.8, the parameter sort_dicts was added (True by default):\nfrom pprint import pprint d = { 'b': [*range(5)], 'c': [] 'a': \"Here is a long string\".split(\" \"), } pprint(d, indent=2, width=20, compact=True, sort_dicts=False) # prints # { 'b': [ 0, 1, 2, 3, # 4], # 'c': [], # 'a': [ 'Here', # 'is', 'a', # 'long', # 'string']} More info here.\nThe “is” operator vs “==” operator The is operator checks if 2 objects point to the same memory address. The equality operator == checks if 2 objects are equal.\nlangs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] copy = langs # now copy and langs point to the same memory object print(copy == langs) # prints True print(copy is langs) # prints True other_copy = list(langs) # other_copy has a copy of langs, but point to different memory objects print(other_copy == langs) # prints True print(other_copy is langs) # prints False List slices You can use slices to replace elements, delete elements or make a copy of a list.\nDelete items: langs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] del langs[0:3] print(langs) # prints ['c++', 'kotlin', 'rust'] Replace elements of a list without creating a new list object langs = ['c', 'python', 'java', 'c++', 'kotlin', 'rust'] copy = langs print(copy is langs) # prints True langs[:] = [41, 42, 43] print(copy is langs) # prints True print(copy) # prints [41, 42, 43] langs = [1, 2, 3] print(copy is langs) # prints False, langs points to new list (new memory object) Make a (shallow) copy of a list langs = ['c', ['python', 'java'], 'c++', 'kotlin', 'rust'] copy = langs[:] copy[1][0] = 'some other lang' print(langs) # prints ['c', ['some other lang', 'java'], 'c++', 'kotlin', 'rust'] Note: If you need a deep copy consider using the function deepcopy() from the module copy.\nDeep and shallow copies There are 2 types of copies in Python. One is the shallow copy, that works very similar to how assigning to pointers works in C (they only reference the object they point to, changing one also changes the other), and the other is the deep copy, which makes a perfect copy of the object.\nimport copy list1 = [1, 2, [3, 4], 5] list2 = copy.copy(list1) list2[2][1] = 6 list2[0] = 7 # shallow copy, list2 holds references to objects in list1, changing one also changes the other print(list1) # prints [1, 2, [3, 6], 5] print(list2) # prints [7, 2, [3, 6], 5] list3 = copy.deepcopy(list1) list3[2][1] = 8 list3[0] = 9 # deep copy, list3 is a perfect copy of list1 with no references to it, changing one doesn't change the other print(list1) # prints [1, 2, [3, 6], 5] print(list3) # prints [9, 2, [3, 8], 5] More about deep and shallow copies here.\nPython’s built-in http server Python has a built-in http server; it can be super useful if you want to preview a website without going the hurdle of starting an apache or nginx server.\nThis serves the website in the current directory at address localhost:8000:\npython3 -m http.server Type annotations Python 3.5 supports type annotations, which can ensure better readability. Note however that they are only there for the programmer to acknowledge, Python does not care and won’t change anything based on them.\ndef func(s1: int, s2: int = 42) -\u003e int: return s1 + s2 They can be changed to anything you want:\ndef func2(page: 'web page', request: 'web request') -\u003e 'web response': # return response Note: Passing 2 strings to func() is perfectly valid, as Python does NOT care at all about these annotations (in this case the function would return the 2 strings concatenated).\nNote 2: You can use stuff like Mypy to enforce this kind of behaviour, so Python becomes statically-typed!\nMore info about type annotations can be found in PEP 484.\nNote 3: Since Python 3.6, PEP 526, more support for type annotations was added. Again, Python will always be a dynamically-typed language, but tools can be used to ensure static typing.\nCounter for iterables This is an easy method to find the most common elements in an iterable:\nimport collections count = collections.Counter('some random string') print(c.most_common()) # prints [('s', 2), ('o', 2), ('m', 2), (' ', 2), ('r', 2), ('n', 2), ('e', 1), ('a', 1), ('d', 1), ('t', 1), ('i', 1), ('g', 1)] print(c.most_common(3)) # prints [('s', 2), ('o', 2), ('m', 2)] More info can be found in the Python docs for the Counter class.\nPermutations of an iterable Get permutations of an iterable:\nimport itertools lst = list(itertools.permutations('abc', 2)) print(lst) # prints [('a', 'b'), ('a', 'c'), ('b', 'a'), ('b', 'c'), ('c', 'a'), ('c', 'b')] The function takes an iterable and another optional argument specifying the length of one permutation.\nGetting the representation of an object as a string Python has 2 methods to transform an object into a string (similar to other languages toString() methods); those are str() and repr().\nimport datetime now = datetime.date.today() print(str(now)) # prints '2020-02-12' print(repr(now)) # prints 'datetime.date(2020, 2, 12)' The function str() is made for clarity, while the function repr() is made to be unambiguos about what the object represents.\nThe python console uses repr().\nPython disassembler Python has a built-in disassembler. It is very rudimentary, but it can help debug some code.\nimport dis def func(text): return 'This is some text \\'' + str(text) + '\\'.' dis.dis(func) # 4 0 LOAD_CONST 1 (\"This is some text '\") # 2 LOAD_GLOBAL 0 (str) # 4 LOAD_FAST 0 (text) # 6 CALL_FUNCTION 1 # 8 BINARY_ADD # 10 LOAD_CONST 2 (\"'.\") # 12 BINARY_ADD # 14 RETURN_VALUE More info in the docs.\nLambda functions Lambda functions, as in other functional programming languages, are anonymous functions that don’t have a name. They are useful for small code that doesn’t require more than a line or two, and they are generally passed as arguments to other functions.\nOne such example that applies to all functional programming languages is the map() function. It takes a callable as the first argument (read function, lambda function, something that can be called), and an iterable as the second argument, and applies the function to each of the elements of the iterable, returning a new iterable.\nobj = map(lambda string: string.lower(), ['StRiNg', 'ANOTHER string']) print(list(obj)) # prints ['string', 'another string'] This code does the exact same thing:\ndef stringlower(string): return string.lower() lst = ['StRiNg', 'ANOTHER string'] obj = [] for item in lst: obj.append(stringlower(item)) print(obj) # prints ['string', 'another string'] Another example:\npower_func = lambda x, y: x ** y print(power_func(2, 3)) # prints 8 x = (lambda a, b: a - b)(5, 4) print(x) # prints 1 Ip addresses in Python Python has an interesting module to work with Ip addresses:\nimport ipaddress address = ipaddress.ip_address('192.168.100.14') print(repr(address)) # prints IPv4Address('192.168.100.14') # you can even have arithmetic operations done on this address print(address + 3) # prints 192.168.100.17 More info here.\nSubclasses and subinstances In Python, you can check if a class is a subclass of some other class:\nclass BaseClass(): pass class SubClass(BaseClass): pass print(issubclass(SubClass, BaseClass)) # prints True print(issubclass(SubClass, object)) # prints True You can also check if some instance is an instance of the specified class or another sublass of that class:\nclass BaseClass(): pass class SubClass(BaseClass): pass obj = SubClass() print(isinstance(obj, BaseClass)) # prints True Asterisk (*) and slash (\\) in function definition (positional- and keyword-only function parameters) In Python 3, you can add an asterisk and a slash to a function definition with special meaning. Asterisk marks keyword-only parameters (that means parameters that can be given to the function just by keyword, not by position), while slash marks positional-only parameters (meaning parameters cannot be given by keyword, but by position only).\ndef func(positional_only_argument, /, positional_and_keyword_argument, *, keyword_only_argument): return positional_only_argument + positional_and_keyword_argument + keyword_only_argument print(func(1, 2, 3)) # Type error, third parameter should be keyword print(func(positional_only_argument = 1, 2, 3)) # Type error, first parameter is positional only print(func(1, 2, keyword_only_argument = 3)) # fine, prints 6 print(func(1, positional_and_keyword_argument = 2, keyword_only_argument = 3)) # fine, prints 6 Info and rationale about these 2 types of parameters can be found in PEP 3102 - keyword-only parameters and in PEP 570 - positional-only parameters.\nNote: Until Python 3.8, positional-only arguments could only be used in library functions. Starting from Python 3.8, they can be used in programmer constructions too.\nPython interactive shell Say you wrote some Python code like this:\ndef min(a, b): return a if a \u003c b else b You can launch it in an interactive shell with python -i main.py, which is similar to calling only python in the command line, with the key difference that the python shell contains your function in the global scope as well. Go ahead, try it!\nPython debugger Python has a debugger, similar to gdb. One way to use it is to simply add import pdb; pdb.set_trace() in your program wherever u want the debugger to stop program execution.\nIn Python 3.7, the debugger can also be called on a script like this: python -m pdb script.py, and it stops when the module loads, just before executing the first line of the script.\ndef add(a, b): return a + b import pdb pdb.set_trace() # code execution will stop here, and the program will enter the debugger print(add(1, 2)) For more information on how to operate the python debugger, visit this.\nNote: Since Python 3.7, instead of import pdb; pdb.set_trace(), you can simply add a breakpoint() function call whenever you want the program to stop execution.\nThe walrus operator (:=) Python 3.8 introduced assignment expressions through the use of a new operator, called the walrus operator (if you look sideways, the operator looks like a walrus).\nAssignment expressions allow you to assign and return a value in the same expression, similar to how things work in a language like C.\nwhile (x := int(input(\"What is your age?\"))) \u003e 18: print(\"You are a grown-up!\") else: print(\"You are a kid!\") It can be useful, for example in list comprehensions:\nlst = [y for x in 'abcd' if (y := f(x)) is not None] # instead of having to compute f(x) twice lst = [f(x) for x in 'abcd' if f(x) is not None] Arguably, the operator is a little confusing, and most of the times not needed and can be replaced with more expressive syntax. There are good arguments to why this operator is not needed in Python here.\nNonetheless, Python 3.8 adopted assignment expressions through the use of the walrus operator :=.\nFor more info on the walrus operator and assignment expressions, see PEP 572.\nFormatted strings (f-strings) Formatted string literals (or f-strings) are a construct added in Python 3.6 and have since become very popular due to the speed (see tip 7) and simplicity.\nSome examples:\nnumber = 3.1415 width = 10 precision = 3 print(f'This is {number:{width}.{precision}}') # prints # This is 3.14 There are three conversion fields; r, s and a. What they do is call the functions repr(), str() and ascii() respectively on the formatted parameter.\nname = 'Alex' print(f'My name is {name!r}') # prints # My name is 'Alex' Since Python 3.8, there is a new specifier (=), that expands to the representation of the expression, making it useful for debugging and self-documenting.\nimport datetime name = 'Alex' print(f'{name=}') # prints name='Alex' now = datetime.date.today() print(f'{now=}') # prints now=datetime.date(2020, 2, 14) # f-string specifiers still work print(f'{now=!s}') # prints now=2020-02-14 number = 3.1415 # Careful when adding format specifiers print(f'{number + 1=:10.2f}') # prints number + 1= 4.14 print(f'{number + 1=:10.2}') # prints number + 1= 4.1 More info about f-strings in the docs.\nNote: Formatted strings have a ‘formatting’ option similar to how printf() works in other languages. Python’s implementation of formatted print is a little more advanced though.\nDecorators and the functools.wraps helper function Say you have a function:\ndef sum(a, b): \"\"\"This function adds 2 numbers and returns the result.\"\"\" return a + b But now we want to log this function call. Of course, adding this code in the implementation of the function is bad, since we’re polluting the function code. Even more so, what if we want to log another 10 function calls?\nFor this purpose, we can easily use a decorator.\ndef log(func): def wrapper(*args, **kwargs): \"\"\"Wrapper function.\"\"\" # do some logging return func(*args, **kwargs) return wrapper Now it is easy to use the decorator on whatever function we want to log.\n@log def sum(a, b): \"\"\"This function adds 2 numbers and returns the result.\"\"\" return a + b print(sum(4, 5)) # this function call will be logged However, one problem arises when decorating a function like this. If we now try to get the doc or the function name, we notice that we get the information of the wrapper function, rather than that of our initial function:\nprint(sum.__doc__) # prints \"Wrapper function\" print(sum.__name__) # prints \"wrapper\" This is not ideal, considering that debuggers and other introspection tools use this. To fix this, we can use functools.wraps.\nimport functools def log(func): @functools.wraps(func) def wrapper(*args, **kwargs): \"\"\"Wrapper function.\"\"\" # do some logging return func(*args, **kwargs) return wrapper @log def sum(a, b): \"\"\"This function adds 2 numbers and returns the result.\"\"\" return a + b print(sum.__doc__) # prints \"This function adds 2 numbers and returns the result.\" print(sum.__name__) # prints \"sum\" Static function variables Python does not have a built-in method to have a static variable in a function like C or other languages do through the use of the static keyword.\nInstead, we can use the fact that functions are first-class objects in Python and we can assign variables to them.\ndef func(): try: func.number_of_times_called += 1 except: func.number_of_times_called = 1 # some really interesting code This is better than having a global variable pollute the global namespace, and is better than having a decorator that does that (because the decorator runs when the python module is loaded even if the function might never be called, so the decorator will still do some work and initialize some value; instead here the code runs only when the function is called, if ever).\n","wordCount":"5354","inLanguage":"en","datePublished":"2020-07-14T00:00:00Z","dateModified":"2020-07-14T00:00:00Z","author":{"@type":"Person","name":"alexghergh"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://shenlong616.github.io/posts/github/alexghergh/python-tricks/"},"publisher":{"@type":"Person","name":"Shenlong616","logo":{"@type":"ImageObject","url":"https://shenlong616.github.io/favicon/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://shenlong616.github.io/ accesskey=h title="Shenlong616 (Alt + H)">Shenlong616</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://shenlong616.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://shenlong616.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://shenlong616.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://shenlong616.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://shenlong616.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://shenlong616.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://shenlong616.github.io/posts/github/>GitHub</a></div><h1 class=post-title>Python 3 tricks</h1><div class=post-description>Some cool Python tricks</div><div class=post-meta><span title='2020-07-14 00:00:00 +0000 UTC'>July 14, 2020</span>&nbsp;·&nbsp;5354 words&nbsp;·&nbsp;alexghergh&nbsp;|&nbsp;<a href=https://github.com/Shenlong616/Shenlong616.github.io/tree/main/_dev/content/posts/github/alexghergh/python-tricks.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
&nbsp;|&nbsp;<span>Originally published at&nbsp;<a href=https://github.com/alexghergh/python-tricks title=https://github.com/alexghergh/python-tricks target=_blank rel="noopener noreferrer">github.com</a></span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#looping-over-a-range-of-numbers aria-label="Looping over a range of numbers">Looping over a range of numbers</a></li><li><a href=#looping-backwards aria-label="Looping backwards">Looping backwards</a></li><li><a href=#looping-over-a-collection-and-indices aria-label="Looping over a collection and indices">Looping over a collection and indices</a></li><li><a href=#looping-over-two-collections aria-label="Looping over two collections">Looping over two collections</a></li><li><a href=#looping-in-sorted-order aria-label="Looping in sorted order">Looping in sorted order</a></li><li><a href=#partial-functions aria-label="Partial functions">Partial functions</a></li><li><a href=#fastest-way-to-format-multiple-strings aria-label="Fastest way to format multiple strings">Fastest way to format multiple strings</a></li><li><a href=#iterating-until-a-sentinel-value aria-label="Iterating until a sentinel value">Iterating until a sentinel value</a></li><li><a href=#for-else-in-python aria-label="For else in Python">For else in Python</a></li><li><a href=#looping-over-dictionary-keys aria-label="Looping over dictionary keys">Looping over dictionary keys</a></li><li><a href=#looping-over-dictionary-keys-and-values aria-label="Looping over dictionary keys and values">Looping over dictionary keys and values</a></li><li><a href=#construct-a-dictionary-from-2-iterables aria-label="Construct a dictionary from 2 iterables">Construct a dictionary from 2 iterables</a></li><li><a href=#populating-a-dictionary-with-default-data-counting-with-dictionary aria-label="Populating a dictionary with default data (Counting with dictionary)">Populating a dictionary with default data (Counting with dictionary)</a></li><li><a href=#creating-a-list-with-n-elements aria-label="Creating a list with n elements">Creating a list with n elements</a></li><li><a href=#ternary-operator-in-python aria-label="Ternary operator in Python">Ternary operator in Python</a></li><li><a href=#grouping-data-with-dictionaries aria-label="Grouping data with dictionaries">Grouping data with dictionaries</a></li><li><a href=#unpacking-sequences aria-label="Unpacking sequences">Unpacking sequences</a></li><li><a href=#concatenating-strings aria-label="Concatenating strings">Concatenating strings</a></li><li><a href=#atomicity-of-builtin-data-types aria-label="Atomicity of builtin data types">Atomicity of builtin data types</a></li><li><a href=#linking-and-overriding-dictionaries-with-defaults aria-label="Linking and overriding dictionaries with defaults">Linking and overriding dictionaries with defaults</a></li><li><a href=#ordered-dictionary aria-label="Ordered dictionary">Ordered dictionary</a></li><li><a href=#using-deque-instead-of-a-list-when-updating aria-label="Using deque instead of a list when updating">Using deque instead of a list when updating</a></li><li><a href=#temporary-contexts aria-label="Temporary contexts">Temporary contexts</a></li><li><a href=#using-the-cache-for-optimized-function-calls aria-label="Using the cache for optimized function calls">Using the cache for optimized function calls</a></li><li><a href=#test-a-sequence-or-generator-for-truthness aria-label="Test a sequence or generator for truthness">Test a sequence or generator for truthness</a></li><li><a href=#use-namedtuples-instead-of-tuples aria-label="Use namedtuples instead of tuples">Use namedtuples instead of tuples</a></li><li><a href=#profiling-code-with-cprofile aria-label="Profiling code with cProfile">Profiling code with cProfile</a></li><li><a href=#pretty-print-stuff aria-label="Pretty print stuff">Pretty print stuff</a></li><li><a href=#the-is-operator-vs--operator aria-label="The &amp;ldquo;is&amp;rdquo; operator vs &amp;ldquo;==&amp;rdquo; operator">The &ldquo;is&rdquo; operator vs &ldquo;==&rdquo; operator</a></li><li><a href=#list-slices aria-label="List slices">List slices</a></li><li><a href=#deep-and-shallow-copies aria-label="Deep and shallow copies">Deep and shallow copies</a></li><li><a href=#pythons-built-in-http-server aria-label="Python&amp;rsquo;s built-in http server">Python&rsquo;s built-in http server</a></li><li><a href=#type-annotations aria-label="Type annotations">Type annotations</a></li><li><a href=#counter-for-iterables aria-label="Counter for iterables">Counter for iterables</a></li><li><a href=#permutations-of-an-iterable aria-label="Permutations of an iterable">Permutations of an iterable</a></li><li><a href=#getting-the-representation-of-an-object-as-a-string aria-label="Getting the representation of an object as a string">Getting the representation of an object as a string</a></li><li><a href=#python-disassembler aria-label="Python disassembler">Python disassembler</a></li><li><a href=#lambda-functions aria-label="Lambda functions">Lambda functions</a></li><li><a href=#ip-addresses-in-python aria-label="Ip addresses in Python">Ip addresses in Python</a></li><li><a href=#subclasses-and-subinstances aria-label="Subclasses and subinstances">Subclasses and subinstances</a></li><li><a href=#asterisk--and-slash--in-function-definition-positional--and-keyword-only-function-parameters aria-label="Asterisk (*) and slash (\) in function definition (positional- and keyword-only function parameters)">Asterisk (*) and slash (\) in function definition (positional- and keyword-only function parameters)</a></li><li><a href=#python-interactive-shell aria-label="Python interactive shell">Python interactive shell</a></li><li><a href=#python-debugger aria-label="Python debugger">Python debugger</a></li><li><a href=#the-walrus-operator- aria-label="The walrus operator (:=)">The walrus operator (:=)</a></li><li><a href=#formatted-strings-f-strings aria-label="Formatted strings (f-strings)">Formatted strings (f-strings)</a></li><li><a href=#decorators-and-the-functoolswraps-helper-function aria-label="Decorators and the functools.wraps helper function">Decorators and the functools.wraps helper function</a></li><li><a href=#static-function-variables aria-label="Static function variables">Static function variables</a></li></ul></div></details></div><div class=post-content><p><strong><em>Disclaimer:</em></strong> This list is meant as a comprehension of cool tips and tricks I found on the internet. If you would like to contribute, or notice any mistakes or typos, please contact me or upload a pull request. If you think any material here can be considered personal property let me know and I will take it down.</p><h3 id=looping-over-a-range-of-numbers>Looping over a range of numbers<a hidden class=anchor aria-hidden=true href=#looping-over-a-range-of-numbers>#</a></h3><p>Using <code>range()</code> is better than using a list (ex. <code>[1, 2, 3]</code>), because the list takes up memory space, whereas the <code>range()</code> function generates values on demand, thus taking a fixed amount of memory whatever the size of the elements is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=o>**</span><span class=mi>2</span><span class=p>)</span>
</span></span></code></pre></div><p>takes the same memory space as:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>100000</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=o>**</span><span class=mi>2</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>Note:</strong> This function used to create a list in python2, and <code>xrange()</code> used to do what <code>range()</code> currently does, but it got changed, so <code>range()</code> in python3 is <code>xrange()</code> in python2.</p><h3 id=looping-backwards>Looping backwards<a hidden class=anchor aria-hidden=true href=#looping-backwards>#</a></h3><p>Use the function <code>reversed()</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>lang</span> <span class=ow>in</span> <span class=nb>reversed</span><span class=p>(</span><span class=n>langs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>lang</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># prints rust, kotlin, c++, java, python, c</span>
</span></span></code></pre></div><h3 id=looping-over-a-collection-and-indices>Looping over a collection and indices<a hidden class=anchor aria-hidden=true href=#looping-over-a-collection-and-indices>#</a></h3><p>Use the function <code>enumerate()</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span><span class=p>,</span><span class=n>lang</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>langs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>i</span><span class=si>}</span><span class=s1> --&gt; </span><span class=si>{</span><span class=n>lang</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># prints</span>
</span></span><span class=line><span class=cl><span class=c1># 0 --&gt; c</span>
</span></span><span class=line><span class=cl><span class=c1># 1 --&gt; python</span>
</span></span><span class=line><span class=cl><span class=c1># 2 --&gt; java</span>
</span></span><span class=line><span class=cl><span class=c1># 3 --&gt; c++</span>
</span></span><span class=line><span class=cl><span class=c1># 4 --&gt; kotlin</span>
</span></span><span class=line><span class=cl><span class=c1># 5 --&gt; rust</span>
</span></span></code></pre></div><h3 id=looping-over-two-collections>Looping over two collections<a hidden class=anchor aria-hidden=true href=#looping-over-two-collections>#</a></h3><p>Use the function <code>zip()</code>. It returns tuples of the elements until one of the iterables is exahusted:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>numbers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>number</span><span class=p>,</span> <span class=n>lang</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>numbers</span><span class=p>,</span> <span class=n>langs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>number</span><span class=si>}</span><span class=s1> --&gt; </span><span class=si>{</span><span class=n>lang</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># prints</span>
</span></span><span class=line><span class=cl><span class=c1># 1 --&gt; c</span>
</span></span><span class=line><span class=cl><span class=c1># 2 --&gt; python</span>
</span></span><span class=line><span class=cl><span class=c1># 3 --&gt; java</span>
</span></span></code></pre></div><p><strong>Note:</strong> It takes any number of iterables and &ldquo;zips&rdquo; them into tuples.</p><p><strong>Note 2:</strong> It&rsquo;s important to note that it generates tuples on demand, so it reuses memory space (it used to create a third list in python2, and <code>izip()</code> used to do what <code>zip()</code> does now in python3).</p><h3 id=looping-in-sorted-order>Looping in sorted order<a hidden class=anchor aria-hidden=true href=#looping-in-sorted-order>#</a></h3><p>Use the function <code>sorted()</code> or the method <code>sort()</code> of iterables.</p><p>By default, it sorts the iterable in ascending order:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>lang</span> <span class=ow>in</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>langs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>lang</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>langs</span><span class=o>.</span><span class=n>sort</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=o>*</span><span class=n>langs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># prints c c++ java kotlin python rust</span>
</span></span></code></pre></div><p>The second method sorts the iterable IN-PLACE, whilst the first returns a different iterable.</p><p>Both the functions can take 2 extra parameters which can specify a comparison function and if the iterable should be reversed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>lang</span> <span class=ow>in</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>langs</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=nb>len</span><span class=p>,</span> <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>lang</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># or</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>langs</span><span class=o>.</span><span class=n>sort</span><span class=p>(</span><span class=n>key</span><span class=o>=</span><span class=nb>len</span><span class=p>,</span> <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=o>*</span><span class=n>langs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># prints kotlin python java rust c++ c</span>
</span></span><span class=line><span class=cl><span class=c1># notice that kotlin and python might be interchanged because they have the same size, same java and rust</span>
</span></span></code></pre></div><h3 id=partial-functions>Partial functions<a hidden class=anchor aria-hidden=true href=#partial-functions>#</a></h3><p>A partial function is a function who has some parameters &ldquo;frozen&rdquo;, in the sense that they are preset. The other parameters must be given when the partial function is called:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>partial</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span> <span class=o>+</span> <span class=mi>2</span><span class=o>*</span><span class=n>y</span> <span class=o>+</span> <span class=mi>3</span><span class=o>*</span><span class=n>z</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>my_func</span> <span class=o>=</span> <span class=n>partial</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>  <span class=c1># assign (preset) 2 to x, 3 to y</span>
</span></span><span class=line><span class=cl><span class=n>my_func</span><span class=p>(</span><span class=mi>3</span><span class=p>)</span>  <span class=c1>#   equivalent to func(2, 3, 3)</span>
</span></span><span class=line><span class=cl>            <span class=c1>#   prints 17</span>
</span></span><span class=line><span class=cl><span class=n>my_func</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>  <span class=c1>#   equivalent to func(2, 3, 4)</span>
</span></span><span class=line><span class=cl>            <span class=c1>#   prints 20</span>
</span></span></code></pre></div><h3 id=fastest-way-to-format-multiple-strings>Fastest way to format multiple strings<a hidden class=anchor aria-hidden=true href=#fastest-way-to-format-multiple-strings>#</a></h3><p>Going from fastest to slowest, they are:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>s</span><span class=si>}</span><span class=s1> </span><span class=si>{</span><span class=n>t</span><span class=si>}</span><span class=s1>&#39;</span>  <span class=c1># fastest</span>
</span></span><span class=line><span class=cl><span class=n>s</span> <span class=o>+</span> <span class=s1>&#39; &#39;</span> <span class=o>+</span> <span class=n>t</span>
</span></span><span class=line><span class=cl><span class=s1>&#39; &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>((</span><span class=n>s</span><span class=p>,</span> <span class=n>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;</span><span class=si>%s</span><span class=s1> </span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=n>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;</span><span class=si>{}</span><span class=s1> </span><span class=si>{}</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=n>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Template</span><span class=p>(</span><span class=s1>&#39;$s $t&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>substitute</span><span class=p>(</span><span class=n>s</span><span class=o>=</span><span class=n>s</span><span class=p>,</span> <span class=n>t</span><span class=o>=</span><span class=n>t</span><span class=p>)</span>  <span class=c1># slowest</span>
</span></span></code></pre></div><p><strong>Note:</strong> f-strings were added in Python 3.6.</p><h3 id=iterating-until-a-sentinel-value>Iterating until a sentinel value<a hidden class=anchor aria-hidden=true href=#iterating-until-a-sentinel-value>#</a></h3><p>This method has 2 forms:</p><ol><li><code>iter(iterable)</code> - this form simply returns an iterator from the iterable. You can call <code>next()</code> on the iterator and iterate through the iterable.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ir</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>langs</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>next</span><span class=p>(</span><span class=n>ir</span><span class=p>))</span> <span class=c1># prints c</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>next</span><span class=p>(</span><span class=n>ir</span><span class=p>))</span> <span class=c1># prints python</span>
</span></span></code></pre></div><ol start=2><li><code>iter(callable, sentinel)</code> - this form executes the function <code>callable</code> until it returns <code>sentinel</code> value.</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>langs</span> <span class=o>=</span> <span class=p>[]):</span>
</span></span><span class=line><span class=cl>    <span class=n>langs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s1>&#39;c&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=n>langs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ir</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>next</span><span class=p>(</span><span class=n>ir</span><span class=p>)</span>    <span class=c1># prints 1</span>
</span></span><span class=line><span class=cl><span class=nb>next</span><span class=p>(</span><span class=n>ir</span><span class=p>)</span>    <span class=c1># prints 2</span>
</span></span><span class=line><span class=cl><span class=nb>next</span><span class=p>(</span><span class=n>ir</span><span class=p>)</span>    <span class=c1># prints 3</span>
</span></span><span class=line><span class=cl><span class=nb>next</span><span class=p>(</span><span class=n>ir</span><span class=p>)</span>    <span class=c1># prints 4</span>
</span></span><span class=line><span class=cl><span class=nb>next</span><span class=p>(</span><span class=n>ir</span><span class=p>)</span>    <span class=c1># raise StopIteration</span>
</span></span></code></pre></div><p>Read 80 characters from file <code>f</code> into <code>line</code> and append to <code>text</code> until <code>f.read()</code> returns <code>''</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>text</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=nb>iter</span><span class=p>(</span><span class=n>partial</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>,</span> <span class=mi>80</span><span class=p>),</span> <span class=s1>&#39;&#39;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>text</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>line</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=for-else-in-python>For else in Python<a hidden class=anchor aria-hidden=true href=#for-else-in-python>#</a></h3><p>Search a certain value in an iterable and do something if it is not there:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>lang</span> <span class=ow>in</span> <span class=n>langs</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>lang</span> <span class=o>==</span> <span class=s1>&#39;scala&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;We found Scala!&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Scala is not in the list...&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>Note:</strong> Careful if you ever come back to this kind of code. Don&rsquo;t indent the <code>else</code> statement by accident!!!</p><h3 id=looping-over-dictionary-keys>Looping over dictionary keys<a hidden class=anchor aria-hidden=true href=#looping-over-dictionary-keys>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;bar&#39;</span><span class=p>:</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;baz&#39;</span><span class=p>:</span> <span class=s1>&#39;rust&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># cannot mutate dictionary here</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>d</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>k</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># free to mutate the keys and values</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>list</span><span class=p>(</span><span class=n>d</span><span class=o>.</span><span class=n>keys</span><span class=p>()):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>k</span> <span class=o>==</span> <span class=s1>&#39;foo&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>del</span> <span class=n>d</span><span class=p>[</span><span class=n>k</span><span class=p>]</span>
</span></span></code></pre></div><p><strong>Note:</strong> <code>d.keys()</code> used to make a list copy of the keys, so there was no problem iterating and mutating the original dictionary at the same time. In modern Python3, <code>d.keys()</code> returns an iterable and can no longer be used to iterate and mutate a dictionary at the same time. To go around this, just wrap the method into a list as in the example.</p><p><strong>Note 2:</strong> There is an &lsquo;alternative&rsquo; to this, but it has worse performance and memory usage:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;bar&#39;</span><span class=p>:</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;baz&#39;</span><span class=p>:</span> <span class=s1>&#39;rust&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Don&#39;t do this, performance is bad as it copies every element in a dictionary and can be really bad for really big dictionaries</span>
</span></span><span class=line><span class=cl><span class=n>s</span> <span class=o>=</span> <span class=p>{</span><span class=n>k</span><span class=p>:</span> <span class=n>v</span> <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>d</span><span class=o>.</span><span class=n>items</span><span class=p>()</span> <span class=k>if</span> <span class=n>k</span> <span class=o>!=</span> <span class=s1>&#39;foo&#39;</span><span class=p>}</span>
</span></span></code></pre></div><h3 id=looping-over-dictionary-keys-and-values>Looping over dictionary keys and values<a hidden class=anchor aria-hidden=true href=#looping-over-dictionary-keys-and-values>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;bar&#39;</span><span class=p>:</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;baz&#39;</span><span class=p>:</span> <span class=s1>&#39;rust&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>d</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>k</span><span class=si>}</span><span class=s1> --&gt; </span><span class=si>{</span><span class=n>v</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p>The <code>items()</code> method returns and iterator, so it uses the same amount of memory no matter how big the dictionary is.</p><p><strong>Note:</strong> In python2, the <code>items()</code> method used to return a list of tuples, and the <code>iteritems()</code> used to do what <code>items()</code> does now in python3.</p><h3 id=construct-a-dictionary-from-2-iterables>Construct a dictionary from 2 iterables<a hidden class=anchor aria-hidden=true href=#construct-a-dictionary-from-2-iterables>#</a></h3><p>Use the <code>zip()</code> method to pack 2 iterables into a zip object, then use the <code>dict()</code> method to make that into a dictionary.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>colors</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=s1>&#39;green&#39;</span><span class=p>,</span> <span class=s1>&#39;red&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=nb>zip</span><span class=p>(</span><span class=n>langs</span><span class=p>,</span> <span class=n>colors</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>    <span class=c1># prints {&#39;c&#39;: &#39;blue&#39;, &#39;python&#39;: &#39;green&#39;, &#39;java&#39;: &#39;red&#39;}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>s</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span><span class=nb>enumerate</span><span class=p>(</span><span class=n>colors</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>s</span><span class=p>)</span>    <span class=c1># prints {1: &#39;blue&#39;, 2: &#39;green&#39;, 3: &#39;red&#39;}</span>
</span></span></code></pre></div><h3 id=populating-a-dictionary-with-default-data-counting-with-dictionary>Populating a dictionary with default data (Counting with dictionary)<a hidden class=anchor aria-hidden=true href=#populating-a-dictionary-with-default-data-counting-with-dictionary>#</a></h3><p>Use the <code>defaultdict()</code> method imported from <code>collections</code>. When a key is not in the dictionary, it creates a new key that has the default value.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>defaultdict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>colors</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;red&#39;</span><span class=p>,</span> <span class=s1>&#39;green&#39;</span><span class=p>,</span> <span class=s1>&#39;red&#39;</span><span class=p>,</span> <span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=s1>&#39;green&#39;</span><span class=p>,</span> <span class=s1>&#39;red&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=n>defaultdict</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>color</span> <span class=ow>in</span> <span class=n>colors</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>d</span><span class=p>[</span><span class=n>color</span><span class=p>]</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>dict</span><span class=p>(</span><span class=n>d</span><span class=p>))</span>    <span class=c1># prints {&#39;blue&#39;: 1, &#39;green&#39;: 2, &#39;red&#39;: 3}</span>
</span></span></code></pre></div><p><strong>Note:</strong> This is a faster approach than <code>setdefault()</code> on most cases and faster than <code>get()</code> in all cases. Also, <code>defaultdict()</code> seems to work faster on native types like <code>int</code> or <code>string</code> and slower on <code>dict</code> or <code>list</code>. That being said, there are times when you cannot use <code>defaultdict()</code> and have to use either <code>setdefault()</code> or <code>get()</code>, for example when the default value of a certain key depends on the key itself, so <code>defaultdict()</code> cannot be used from the beginning to have a default value for every new key.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>colors</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;red&#39;</span><span class=p>,</span> <span class=s1>&#39;green&#39;</span><span class=p>,</span> <span class=s1>&#39;red&#39;</span><span class=p>,</span> <span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=s1>&#39;green&#39;</span><span class=p>,</span> <span class=s1>&#39;red&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>color</span> <span class=ow>in</span> <span class=n>colors</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>d</span><span class=p>[</span><span class=n>color</span><span class=p>]</span> <span class=o>=</span> <span class=n>d</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=n>color</span><span class=p>,</span> <span class=mi>2</span> <span class=k>if</span> <span class=n>color</span> <span class=o>==</span> <span class=s1>&#39;red&#39;</span> <span class=k>else</span> <span class=mi>0</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>    <span class=c1># prints {&#39;blue&#39;: 1, &#39;green&#39;: 2, &#39;red&#39;: 5}</span>
</span></span></code></pre></div><p><strong>Note 2:</strong> A case where <code>get()</code> accomplishes nicely what <code>setdefault()</code> and <code>defaultdict()</code> would do in a more complicated manner is when you have to return a default value from a dictionary if the key is not in it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=mi>1</span><span class=p>:</span> <span class=s1>&#39;Alice&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=mi>2</span><span class=p>:</span> <span class=s1>&#39;Bob&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=mi>3</span><span class=p>:</span> <span class=s1>&#39;Carla&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span><span class=p>(</span><span class=nb>id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sa>f</span><span class=s1>&#39;Hi, </span><span class=si>{</span><span class=n>d</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=nb>id</span><span class=p>,</span> <span class=s2>&#34;random person&#34;</span><span class=p>)</span><span class=si>}</span><span class=s1>&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>hello</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span> <span class=c1># prints Hi, Alice</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>hello</span><span class=p>(</span><span class=mi>4</span><span class=p>))</span> <span class=c1># prints Hi, random person</span>
</span></span></code></pre></div><h3 id=creating-a-list-with-n-elements>Creating a list with n elements<a hidden class=anchor aria-hidden=true href=#creating-a-list-with-n-elements>#</a></h3><p>Say you want to create a list with 100 elements of 0. You can just do:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>lst</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>lst</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=ternary-operator-in-python>Ternary operator in Python<a hidden class=anchor aria-hidden=true href=#ternary-operator-in-python>#</a></h3><p>This:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>x</span> <span class=o>=</span> <span class=p>(</span><span class=n>y</span> <span class=o>==</span> <span class=mi>1</span> <span class=o>?</span> <span class=mi>1</span> <span class=o>:</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>can be written like this in python:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>y</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span> <span class=k>if</span> <span class=n>y</span> <span class=o>==</span> <span class=mi>1</span> <span class=k>else</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=grouping-data-with-dictionaries>Grouping data with dictionaries<a hidden class=anchor aria-hidden=true href=#grouping-data-with-dictionaries>#</a></h3><p>Say you want to group the items in a list based on some comparison function, for example <code>len()</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>defaultdict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>names</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;julia&#39;</span><span class=p>,</span> <span class=s1>&#39;mark&#39;</span><span class=p>,</span> <span class=s1>&#39;thomas&#39;</span><span class=p>,</span> <span class=s1>&#39;rachel&#39;</span><span class=p>,</span> <span class=s1>&#39;alex&#39;</span><span class=p>,</span> <span class=s1>&#39;maria&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=n>defaultdict</span><span class=p>(</span><span class=nb>list</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>names</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>d</span><span class=p>[</span><span class=n>key</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>dict</span><span class=p>(</span><span class=n>d</span><span class=p>))</span>    <span class=c1># prints {5: [&#39;julia&#39;, &#39;maria&#39;], 4: [&#39;mark&#39;, &#39;alex&#39;], 6: [&#39;thomas&#39;, &#39;rachel&#39;]}</span>
</span></span></code></pre></div><p>All you have to do to group based on some other function is change the <code>key</code> to something else.</p><h3 id=unpacking-sequences>Unpacking sequences<a hidden class=anchor aria-hidden=true href=#unpacking-sequences>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=s1>&#39;alex&#39;</span><span class=p>,</span> <span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=mi>20</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span>         <span class=c1># same as p = (&#39;alex&#39;, &#39;blue&#39;, 20, &#39;c&#39;)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>name</span><span class=p>,</span> <span class=n>color</span><span class=p>,</span> <span class=n>age</span><span class=p>,</span> <span class=n>lang</span> <span class=o>=</span> <span class=n>p</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>p</span><span class=p>)</span>                            <span class=c1># prints a tuple - (&#39;alex&#39;, &#39;blue&#39;, 20, &#39;c&#39;)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>color</span><span class=p>,</span> <span class=n>age</span><span class=p>,</span> <span class=n>lang</span><span class=p>)</span>       <span class=c1># prints alex blue 20 c</span>
</span></span></code></pre></div><p><strong>Note:</strong> In the same manner, swapping 2 variables in python might be the most elegant way out of all the languages:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># swap x and y</span>
</span></span><span class=line><span class=cl><span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>y</span><span class=p>,</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span> <span class=c1># prints 2 1</span>
</span></span></code></pre></div><h3 id=concatenating-strings>Concatenating strings<a hidden class=anchor aria-hidden=true href=#concatenating-strings>#</a></h3><p>Use the <code>join()</code> method to concatenate strings from an iterable.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># join the strings from langs, having &#39;, &#39; as separator</span>
</span></span><span class=line><span class=cl><span class=n>text</span> <span class=o>=</span> <span class=s1>&#39;, &#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>langs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>text</span><span class=p>)</span> <span class=c1># prints c, python, java, c++, kotlin, rust</span>
</span></span></code></pre></div><h3 id=atomicity-of-builtin-data-types>Atomicity of builtin data types<a hidden class=anchor aria-hidden=true href=#atomicity-of-builtin-data-types>#</a></h3><p>Most (!not all) of the builtin data types methods are implemented using C function calls, so that makes it atomic.</p><p>For a better explanaton check <a href="https://webcache.googleusercontent.com/search?q=cache:9ATPT7NPHg0J:effbot.org/pyfaq/what-kinds-of-global-value-mutation-are-thread-safe.htm+&cd=4&hl=en&ct=clnk&gl=in">here</a>.</p><p>Also, dictionaries&rsquo; <code>popitem()</code> is atomic, while <code>pop()</code> may not, based on the key type (if the key is not a builtin data type, Python has to call that object&rsquo;s <code>__hash__()</code> implementation), so better use <code>popitem()</code> where atomicity is needed.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;bar&#39;</span><span class=p>:</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;baz&#39;</span><span class=p>:</span> <span class=s1>&#39;rust&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=n>d</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=o>=</span> <span class=n>d</span><span class=o>.</span><span class=n>popitem</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>key</span><span class=si>}</span><span class=s1> --&gt; </span><span class=si>{</span><span class=n>value</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># prints</span>
</span></span><span class=line><span class=cl><span class=c1># foo --&gt; c</span>
</span></span><span class=line><span class=cl><span class=c1># bar --&gt; java</span>
</span></span><span class=line><span class=cl><span class=c1># baz --&gt; rust</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># d is empty at the end</span>
</span></span></code></pre></div><p><strong>Note:</strong> If unsure, don&rsquo;t hesitate to use mutexes!</p><h3 id=linking-and-overriding-dictionaries-with-defaults>Linking and overriding dictionaries with defaults<a hidden class=anchor aria-hidden=true href=#linking-and-overriding-dictionaries-with-defaults>#</a></h3><p>When you have a dictionary that has some default values and you want to override it with another dictionary, use <code>ChainMap()</code>. <code>ChainMap()</code> has the advantage that it doesn&rsquo;t copy anything, it just &ldquo;links&rdquo; the dictionaries, using the initial memory (this also means that any change in the initial dictionary will be reflected in the <code>ChainMap()</code> as well).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>ChainMap</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>defaults</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;bar&#39;</span><span class=p>:</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;java&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>overwritten</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;rust&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;barn&#39;</span><span class=p>:</span> <span class=s1>&#39;c++&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=n>ChainMap</span><span class=p>(</span><span class=n>overwritten</span><span class=p>,</span> <span class=n>defaults</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>dict</span><span class=p>(</span><span class=n>d</span><span class=p>))</span>    <span class=c1># prints {&#39;foo&#39;: &#39;rust&#39;, &#39;barn&#39;: &#39;c++&#39;, &#39;bar&#39;: &#39;c&#39;}</span>
</span></span></code></pre></div><p><strong>Note:</strong> Don&rsquo;t use <code>copy()</code> and then <code>update()</code>, it is really bad performance-wise and can be replaced in 99% of the cases by a <code>ChainMap()</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>d1</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;bar&#39;</span><span class=p>:</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;java&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d2</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;foo&#39;</span><span class=p>:</span> <span class=s1>&#39;rust&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;barn&#39;</span><span class=p>:</span> <span class=s1>&#39;c++&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Don&#39;t do this!!</span>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=n>d1</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>d</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>d2</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>Note 2:</strong> For a better example when this is useful, see <a href=https://docs.python.org/3/library/collections.html#collections.ChainMap>this</a>.</p><h3 id=ordered-dictionary>Ordered dictionary<a hidden class=anchor aria-hidden=true href=#ordered-dictionary>#</a></h3><p>A dictionary is not guaranteed to preserve the order of insertion. It actually optimizes keys for faster lookup. However there is one way to have a dictionary preserve insertion order, using <code>OrderedDict()</code> from <code>collections</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>OrderedDict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>d</span><span class=p>[</span><span class=s1>&#39;bar&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;c&#39;</span>
</span></span><span class=line><span class=cl><span class=n>d</span><span class=p>[</span><span class=s1>&#39;foo&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;java&#39;</span>
</span></span><span class=line><span class=cl><span class=n>d</span><span class=p>[</span><span class=s1>&#39;baz&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;rust&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>dict</span><span class=p>(</span><span class=n>d</span><span class=p>))</span>  <span class=c1># prints {&#39;bar&#39;: &#39;c&#39;, &#39;foo&#39;: &#39;java&#39;, &#39;baz&#39;: &#39;rust&#39;}</span>
</span></span></code></pre></div><p><strong>Note:</strong> Since Python 3.7, regular <code>dict</code>s have guaranteed ordering. More <a href=https://docs.python.org/3/library/stdtypes.html#dict>here</a>. Note however that they don&rsquo;t <strong><em>completely</em></strong> replace <code>OrderedDict</code>s, since they have extra features:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>OrderedDict</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>:</span> <span class=mi>2</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=p>{</span><span class=mi>2</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>a</span> <span class=o>==</span> <span class=n>b</span><span class=p>)</span>   <span class=c1># returns True</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>c</span> <span class=o>==</span> <span class=n>d</span><span class=p>)</span>   <span class=c1># returns False since OrderedDicts are order-sensitive, and regular dicts are not</span>
</span></span></code></pre></div><p>Also, <code>OrderedDict</code>s have methods to change order of elements, while regular <code>dict</code>s don&rsquo;t.</p><h3 id=using-deque-instead-of-a-list-when-updating>Using deque instead of a list when updating<a hidden class=anchor aria-hidden=true href=#using-deque-instead-of-a-list-when-updating>#</a></h3><p>Deques (double ended queues) are really fast in python3. They are implemented using doubly-linked lists, so inserting and removing at the end or at the beginning is O(1) complexity. Lists are implemented as normal arrays, so they have to sometimes <code>realloc()</code> to accomodate for the number of elements (only sometimes because by default it <code>realloc()</code>s more memory at the time than necessary&rsquo;), so that makes them have O(n) complexity when inserting or removing at the beginning because they have to copy the rest of the elements.</p><p>Generally, updating a sequence is MUCH faster when using a <code>deque()</code> as opposed to using a <code>list()</code> (though keep in mind that accessing a random element in a <code>deque()</code> is expensive, whereas accessing a random element in a <code>list()</code> is O(1)).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>deque</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Wrong!</span>
</span></span><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>langs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>langs</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>langs</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;scala&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Right!</span>
</span></span><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=n>deque</span><span class=p>([</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>langs</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>langs</span><span class=o>.</span><span class=n>popleft</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>langs</span><span class=o>.</span><span class=n>appendleft</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;scala&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=temporary-contexts>Temporary contexts<a hidden class=anchor aria-hidden=true href=#temporary-contexts>#</a></h3><p>Usually there is the case that code like this is written in other languages:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>decimal</span> <span class=kn>import</span> <span class=n>getcontext</span><span class=p>,</span> <span class=n>setcontext</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>old_context</span> <span class=o>=</span> <span class=n>getcontext</span><span class=p>()</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>getcontext</span><span class=p>()</span><span class=o>.</span><span class=n>prec</span> <span class=o>=</span> <span class=mi>50</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=mi>355</span><span class=p>)</span> <span class=o>/</span> <span class=n>Decimal</span><span class=p>(</span><span class=mi>113</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>setcontext</span><span class=p>(</span><span class=n>old_context</span><span class=p>)</span>
</span></span></code></pre></div><p>This can easily be replaced with contexts:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>decimal</span> <span class=kn>import</span> <span class=n>localcontext</span><span class=p>,</span> <span class=n>Context</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>localcontext</span><span class=p>(</span><span class=n>Context</span><span class=p>(</span><span class=n>prec</span><span class=o>=</span><span class=mi>50</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>Decimal</span><span class=p>(</span><span class=mi>355</span><span class=p>)</span> <span class=o>/</span> <span class=n>Decimal</span><span class=p>(</span><span class=mi>113</span><span class=p>))</span>
</span></span></code></pre></div><p>Other examples:</p><ol><li>Writing or reading from file</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;data.txt&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1># do something with data</span>
</span></span><span class=line><span class=cl><span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></div><p>can be replaced with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;data.txt&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1># do something with data</span>
</span></span></code></pre></div><ol start=2><li>Deleting a file (getting rid of the try-except-pass idiom):</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>os</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=s1>&#39;sometempfile.tmp&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>OSError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span></code></pre></div><p>can be replaced with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>contextlib</span> <span class=kn>import</span> <span class=n>suppress</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>suppress</span><span class=p>(</span><span class=ne>FileNotFoundError</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>os</span><span class=o>.</span><span class=n>remove</span><span class=p>(</span><span class=s1>&#39;sometempfile.tmp&#39;</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>Note:</strong> <code>suppress()</code> is a reentrant context manager. More info <a href=https://docs.python.org/3/library/contextlib.html#reentrant-context-managers>here</a>.</p><ol start=3><li>Using a lock</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># critical section</span>
</span></span><span class=line><span class=cl><span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>lock</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
</span></span></code></pre></div><p>can be replaced with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>lock</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>lock</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># critical section</span>
</span></span></code></pre></div><p><strong>Note:</strong> For reentrant lock context manager, see <a href=https://docs.python.org/3/library/threading.html#threading.RLock>threading.RLock</a>.</p><ol start=4><li>Redirecting output from stdout to file</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;help.txt&#39;</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>sldstdout</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>stdout</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>stdout</span> <span class=o>=</span> <span class=n>f</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>help</span><span class=p>(</span><span class=nb>pow</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>stdout</span> <span class=o>=</span> <span class=n>oldstdout</span>
</span></span></code></pre></div><p>can be replaced with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;help.txt&#39;</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=n>redirect_stdout</span><span class=p>(</span><span class=n>f</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>help</span><span class=p>(</span><span class=nb>pow</span><span class=p>)</span>
</span></span></code></pre></div><p><strong>Note:</strong> <code>redirect_stdout()</code> is also a reentrant context manager.</p><p>More on context managers <a href=https://docs.python.org/3/library/contextlib.html>here</a>.</p><h3 id=using-the-cache-for-optimized-function-calls>Using the cache for optimized function calls<a hidden class=anchor aria-hidden=true href=#using-the-cache-for-optimized-function-calls>#</a></h3><p>For example, looking up a webpage numerous times is expensive, and usually the result is the same. So use the <code>lru_cache()</code> decorator:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>functools</span> <span class=kn>import</span> <span class=n>lru_cache</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@lru_cache</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>web_lookup</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>urllib</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>url</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span></code></pre></div><p>More can be found <a href=https://docs.python.org/3/library/functools.html#functools.lru_cache>here</a>.</p><h3 id=test-a-sequence-or-generator-for-truthness>Test a sequence or generator for truthness<a hidden class=anchor aria-hidden=true href=#test-a-sequence-or-generator-for-truthness>#</a></h3><p>Using the <code>any()</code> function, you can check if at least one value in the iterable is <code>True</code>. It applies the <code>bool()</code> function to every element.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>false_lst</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=kc>False</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=p>[],</span> <span class=p>{},</span> <span class=kc>None</span><span class=p>]</span>   <span class=c1># all of these return False when using bool() on them</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>any</span><span class=p>(</span><span class=n>false_lst</span><span class=p>))</span>   <span class=c1># prints False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>true_lst</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=kc>True</span><span class=p>,</span> <span class=s1>&#39;x&#39;</span><span class=p>,</span> <span class=mf>3.14</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>],</span> <span class=p>{</span><span class=s1>&#39;a&#39;</span><span class=p>:</span> <span class=s1>&#39;b&#39;</span><span class=p>}]</span>  <span class=c1># all of these return True when using bool() on them</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>any</span><span class=p>(</span><span class=n>true_lst</span><span class=p>))</span>    <span class=c1># prints True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>falst_lst</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span>    <span class=c1># any integer different from 0 is considered True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>any</span><span class=p>(</span><span class=n>false_lst</span><span class=p>))</span>   <span class=c1># prints True</span>
</span></span></code></pre></div><p><strong>Note:</strong> This function shortcircuits, meaning the first time it finds <code>True</code> it returns; it does <strong>NOT</strong> check for the rest of the values to be <code>True</code>.</p><p><strong>Note 2:</strong> It is really useful with generators:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>any</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>1000000</span><span class=p>))</span>   <span class=c1># prints True after 2 values evaluated, as range() is a generator</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>any</span><span class=p>([</span><span class=nb>range</span><span class=p>(</span><span class=mi>1000000</span><span class=p>)]))</span>   <span class=c1># prints True after the whole list of 1000000 elements has been initialized, as range() has to populate the list first</span>
</span></span></code></pre></div><p>There is another function, <code>all()</code>, that does what it says: it tests for all the elements in the sequence to be <code>True</code>, and works much in the same way as <code>any()</code>.</p><h3 id=use-namedtuples-instead-of-tuples>Use namedtuples instead of tuples<a hidden class=anchor aria-hidden=true href=#use-namedtuples-instead-of-tuples>#</a></h3><p>Aside from the fact that <code>namedtuple()</code>s are more verbose, they also offer better usage, as they can be treated as regular tuples, classes or even dictionaries.</p><p>For example, having a point:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>pt1</span> <span class=o>=</span> <span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>pt1</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>pt1</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>   <span class=c1># prints 2 3</span>
</span></span></code></pre></div><p>can be replaced with the better alternative <code>namedtuple()</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>namedtuple</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Point</span> <span class=o>=</span> <span class=n>namedtuple</span><span class=p>(</span><span class=s1>&#39;Point&#39;</span><span class=p>,</span> <span class=s1>&#39;x y&#39;</span><span class=p>)</span>  <span class=c1># a tuple named &#39;Point&#39; with attributes &#39;x&#39; and &#39;y&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># alternatively this means the exact same thing</span>
</span></span><span class=line><span class=cl><span class=c1># Point = namedtuple(&#39;Point&#39;, [&#39;x&#39;, &#39;y&#39;])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>pt1</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>pt1</span><span class=p>)</span>                  <span class=c1># prints Point(x=2, y=3)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>pt1</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>pt1</span><span class=o>.</span><span class=n>y</span><span class=p>)</span>         <span class=c1># prints 2 3</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>pt1</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>pt1</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>       <span class=c1># prints 2 3</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>dict</span><span class=p>(</span><span class=n>pt1</span><span class=o>.</span><span class=n>_asdict</span><span class=p>()))</span>  <span class=c1># prints {&#39;x&#39;: 2, &#39;y&#39;: 3}</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>pt1</span><span class=o>.</span><span class=n>_replace</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=mi>50</span><span class=p>))</span>   <span class=c1># prints Point(x=50, y=3)</span>
</span></span><span class=line><span class=cl>                            <span class=c1># Note however that _replace() returns a modified copy. The original is still a tuple, so it cannot be modified</span>
</span></span></code></pre></div><p>Another common example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>namedtuple</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Person</span> <span class=o>=</span> <span class=n>namedtuple</span><span class=p>(</span><span class=s1>&#39;Person&#39;</span><span class=p>,</span> <span class=s1>&#39;age color lang&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>person</span> <span class=o>=</span> <span class=n>Person</span><span class=p>(</span><span class=mi>31</span><span class=p>,</span> <span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>person</span><span class=p>)</span>   <span class=c1># prints Person(age=31, color=&#39;blue&#39;, lang=&#39;c&#39;)</span>
</span></span></code></pre></div><p><strong>Note:</strong> When the values from a <code>namedtuple()</code> are invalid (e.g. having one of the fields named <code>class</code> or having the same field twice), it throws a <code>ValueError</code>. To avoid this you can possibly provide a third parameter named <code>rename</code>. If set to <code>True</code>, it will rename the field that is incorrect.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections</span> <span class=kn>import</span> <span class=n>namedtuple</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Person</span> <span class=o>=</span> <span class=n>namedtuple</span><span class=p>(</span><span class=s1>&#39;Person&#39;</span><span class=p>,</span> <span class=s1>&#39;age color age&#39;</span><span class=p>,</span> <span class=n>rename</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=p>(</span><span class=mi>31</span><span class=p>,</span> <span class=s1>&#39;blue&#39;</span><span class=p>,</span> <span class=s1>&#39;whatever&#39;</span><span class=p>))</span>   <span class=c1># prints Person(age=31, color=&#39;blue&#39;, _2=&#39;whatever&#39;)</span>
</span></span></code></pre></div><p><strong>Note 2:</strong> Since Python 3.8, <code>_asdict()</code> method returns a regular dictionary, as regular <code>dict</code>s now have guaranteed ordering based on insertion (since Python 3.7).</p><h3 id=profiling-code-with-cprofile>Profiling code with cProfile<a hidden class=anchor aria-hidden=true href=#profiling-code-with-cprofile>#</a></h3><p>Since Python 3.8, cProfile can be used as a context manager, making it extremely easy to profile code.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>cProfile</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>cProfile</span><span class=o>.</span><span class=n>Profile</span><span class=p>()</span> <span class=k>as</span> <span class=n>profiler</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># code to be profiled</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>profiler</span><span class=o>.</span><span class=n>print_stats</span><span class=p>()</span>
</span></span></code></pre></div><h3 id=pretty-print-stuff>Pretty print stuff<a hidden class=anchor aria-hidden=true href=#pretty-print-stuff>#</a></h3><p>One way to format the output is to use the <code>pprint</code> module.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pprint</span> <span class=kn>import</span> <span class=n>pprint</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;b&#39;</span><span class=p>:</span> <span class=p>[</span><span class=o>*</span><span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>)],</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;c&#39;</span><span class=p>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;a&#39;</span><span class=p>:</span> <span class=s2>&#34;Here is a long string&#34;</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>pprint</span><span class=p>(</span><span class=n>d</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>compact</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># prints</span>
</span></span><span class=line><span class=cl><span class=c1># { &#39;a&#39;: [ &#39;Here&#39;,</span>
</span></span><span class=line><span class=cl><span class=c1>#          &#39;is&#39;, &#39;a&#39;,</span>
</span></span><span class=line><span class=cl><span class=c1>#          &#39;long&#39;,</span>
</span></span><span class=line><span class=cl><span class=c1>#          &#39;string&#39;],</span>
</span></span><span class=line><span class=cl><span class=c1>#   &#39;b&#39;: [ 0, 1, 2, 3,</span>
</span></span><span class=line><span class=cl><span class=c1>#          4],</span>
</span></span><span class=line><span class=cl><span class=c1>#   &#39;c&#39;: []}</span>
</span></span></code></pre></div><p><strong>Note</strong>: Since Python 3.8, the parameter <code>sort_dicts</code> was added (<code>True</code> by default):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>pprint</span> <span class=kn>import</span> <span class=n>pprint</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;b&#39;</span><span class=p>:</span> <span class=p>[</span><span class=o>*</span><span class=nb>range</span><span class=p>(</span><span class=mi>5</span><span class=p>)],</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;c&#39;</span><span class=p>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;a&#39;</span><span class=p>:</span> <span class=s2>&#34;Here is a long string&#34;</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>pprint</span><span class=p>(</span><span class=n>d</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>20</span><span class=p>,</span> <span class=n>compact</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>sort_dicts</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># prints</span>
</span></span><span class=line><span class=cl><span class=c1># { &#39;b&#39;: [ 0, 1, 2, 3,</span>
</span></span><span class=line><span class=cl><span class=c1>#          4],</span>
</span></span><span class=line><span class=cl><span class=c1>#   &#39;c&#39;: [],</span>
</span></span><span class=line><span class=cl><span class=c1>#   &#39;a&#39;: [ &#39;Here&#39;,</span>
</span></span><span class=line><span class=cl><span class=c1>#          &#39;is&#39;, &#39;a&#39;,</span>
</span></span><span class=line><span class=cl><span class=c1>#          &#39;long&#39;,</span>
</span></span><span class=line><span class=cl><span class=c1>#          &#39;string&#39;]}</span>
</span></span></code></pre></div><p>More info <a href=https://docs.python.org/3/library/pprint.html#module-pprint>here</a>.</p><h3 id=the-is-operator-vs--operator>The &ldquo;is&rdquo; operator vs &ldquo;==&rdquo; operator<a hidden class=anchor aria-hidden=true href=#the-is-operator-vs--operator>#</a></h3><p>The <code>is</code> operator checks if 2 objects point to the same memory address. The equality operator <code>==</code> checks if 2 objects are equal.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>copy</span> <span class=o>=</span> <span class=n>langs</span>    <span class=c1># now copy and langs point to the same memory object</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>copy</span> <span class=o>==</span> <span class=n>langs</span><span class=p>)</span>    <span class=c1># prints True</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>copy</span> <span class=ow>is</span> <span class=n>langs</span><span class=p>)</span>    <span class=c1># prints True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>other_copy</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>langs</span><span class=p>)</span>    <span class=c1># other_copy has a copy of langs, but point to different memory objects</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>other_copy</span> <span class=o>==</span> <span class=n>langs</span><span class=p>)</span>  <span class=c1># prints True</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>other_copy</span> <span class=ow>is</span> <span class=n>langs</span><span class=p>)</span>  <span class=c1># prints False</span>
</span></span></code></pre></div><h3 id=list-slices>List slices<a hidden class=anchor aria-hidden=true href=#list-slices>#</a></h3><p>You can use slices to replace elements, delete elements or make a copy of a list.</p><ol><li>Delete items:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>langs</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>langs</span><span class=p>)</span>    <span class=c1># prints [&#39;c++&#39;, &#39;kotlin&#39;, &#39;rust&#39;]</span>
</span></span></code></pre></div><ol start=2><li>Replace elements of a list without creating a new list object</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>,</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>copy</span> <span class=o>=</span> <span class=n>langs</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>copy</span> <span class=ow>is</span> <span class=n>langs</span><span class=p>)</span>    <span class=c1># prints True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>langs</span><span class=p>[:]</span> <span class=o>=</span> <span class=p>[</span><span class=mi>41</span><span class=p>,</span> <span class=mi>42</span><span class=p>,</span> <span class=mi>43</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>copy</span> <span class=ow>is</span> <span class=n>langs</span><span class=p>)</span>    <span class=c1># prints True</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>copy</span><span class=p>)</span>             <span class=c1># prints [41, 42, 43]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>copy</span> <span class=ow>is</span> <span class=n>langs</span><span class=p>)</span>    <span class=c1># prints False, langs points to new list (new memory object)</span>
</span></span></code></pre></div><ol start=3><li>Make a (shallow) copy of a list</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>langs</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;python&#39;</span><span class=p>,</span> <span class=s1>&#39;java&#39;</span><span class=p>],</span> <span class=s1>&#39;c++&#39;</span><span class=p>,</span> <span class=s1>&#39;kotlin&#39;</span><span class=p>,</span> <span class=s1>&#39;rust&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>copy</span> <span class=o>=</span> <span class=n>langs</span><span class=p>[:]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>copy</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;some other lang&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>langs</span><span class=p>)</span>    <span class=c1># prints [&#39;c&#39;, [&#39;some other lang&#39;, &#39;java&#39;], &#39;c++&#39;, &#39;kotlin&#39;, &#39;rust&#39;]</span>
</span></span></code></pre></div><p><strong>Note:</strong> If you need a deep copy consider using the function <code>deepcopy()</code> from the module <code>copy</code>.</p><h3 id=deep-and-shallow-copies>Deep and shallow copies<a hidden class=anchor aria-hidden=true href=#deep-and-shallow-copies>#</a></h3><p>There are 2 types of copies in Python. One is the shallow copy, that works very similar to how assigning to pointers works in C (they only reference the object they point to, changing one also changes the other), and the other is the deep copy, which makes a perfect copy of the object.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>copy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>list1</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>],</span> <span class=mi>5</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>list2</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>copy</span><span class=p>(</span><span class=n>list1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>list2</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>6</span>
</span></span><span class=line><span class=cl><span class=n>list2</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>7</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># shallow copy, list2 holds references to objects in list1, changing one also changes the other</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>list1</span><span class=p>)</span>    <span class=c1># prints [1, 2, [3, 6], 5]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>list2</span><span class=p>)</span>    <span class=c1># prints [7, 2, [3, 6], 5]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>list3</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>list1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>list3</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>8</span>
</span></span><span class=line><span class=cl><span class=n>list3</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>9</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># deep copy, list3 is a perfect copy of list1 with no references to it, changing one doesn&#39;t change the other</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>list1</span><span class=p>)</span>    <span class=c1># prints [1, 2, [3, 6], 5]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>list3</span><span class=p>)</span>    <span class=c1># prints [9, 2, [3, 8], 5]</span>
</span></span></code></pre></div><p>More about deep and shallow copies <a href=https://www.geeksforgeeks.org/copy-python-deep-copy-shallow-copy/>here</a>.</p><h3 id=pythons-built-in-http-server>Python&rsquo;s built-in http server<a hidden class=anchor aria-hidden=true href=#pythons-built-in-http-server>#</a></h3><p>Python has a built-in http server; it can be super useful if you want to preview a website without going the hurdle of starting an apache or nginx server.</p><p>This serves the website in the current directory at address <code>localhost:8000</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>python3 -m http.server
</span></span></code></pre></div><h3 id=type-annotations>Type annotations<a hidden class=anchor aria-hidden=true href=#type-annotations>#</a></h3><p>Python 3.5 supports type annotations, which can ensure better readability. <strong>Note however that they are only there for the programmer to acknowledge, Python does not care and won&rsquo;t change anything based on them</strong>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>s1</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span> <span class=n>s2</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>42</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>s1</span> <span class=o>+</span> <span class=n>s2</span>
</span></span></code></pre></div><p>They can be changed to anything you want:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>func2</span><span class=p>(</span><span class=n>page</span><span class=p>:</span> <span class=s1>&#39;web page&#39;</span><span class=p>,</span> <span class=n>request</span><span class=p>:</span> <span class=s1>&#39;web request&#39;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s1>&#39;web response&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># return response</span>
</span></span></code></pre></div><p><strong>Note:</strong> Passing 2 strings to <code>func()</code> is perfectly valid, as Python does <strong><em>NOT</em></strong> care at all about these annotations (in this case the function would return the 2 strings concatenated).</p><p><strong>Note 2:</strong> You can use stuff like <a href=http://mypy-lang.org>Mypy</a> to enforce this kind of behaviour, so Python becomes statically-typed!</p><p>More info about type annotations can be found in <a href=https://www.python.org/dev/peps/pep-0484/>PEP 484</a>.</p><p><strong>Note 3:</strong> Since Python 3.6, <a href=https://www.python.org/dev/peps/pep-0526/>PEP 526</a>, more support for type annotations was added. Again, <strong>Python will always be a dynamically-typed language</strong>, but tools can be used to ensure static typing.</p><h3 id=counter-for-iterables>Counter for iterables<a hidden class=anchor aria-hidden=true href=#counter-for-iterables>#</a></h3><p>This is an easy method to find the most common elements in an iterable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>collections</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>count</span> <span class=o>=</span> <span class=n>collections</span><span class=o>.</span><span class=n>Counter</span><span class=p>(</span><span class=s1>&#39;some random string&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>c</span><span class=o>.</span><span class=n>most_common</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=c1># prints [(&#39;s&#39;, 2), (&#39;o&#39;, 2), (&#39;m&#39;, 2), (&#39; &#39;, 2), (&#39;r&#39;, 2), (&#39;n&#39;, 2), (&#39;e&#39;, 1), (&#39;a&#39;, 1), (&#39;d&#39;, 1), (&#39;t&#39;, 1), (&#39;i&#39;, 1), (&#39;g&#39;, 1)]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>c</span><span class=o>.</span><span class=n>most_common</span><span class=p>(</span><span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># prints [(&#39;s&#39;, 2), (&#39;o&#39;, 2), (&#39;m&#39;, 2)]</span>
</span></span></code></pre></div><p>More info can be found <a href=https://docs.python.org/3/library/collections.html#collections.Counter>in the Python docs for the Counter class</a>.</p><h3 id=permutations-of-an-iterable>Permutations of an iterable<a hidden class=anchor aria-hidden=true href=#permutations-of-an-iterable>#</a></h3><p>Get permutations of an iterable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>itertools</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>lst</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>itertools</span><span class=o>.</span><span class=n>permutations</span><span class=p>(</span><span class=s1>&#39;abc&#39;</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>lst</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># prints [(&#39;a&#39;, &#39;b&#39;), (&#39;a&#39;, &#39;c&#39;), (&#39;b&#39;, &#39;a&#39;), (&#39;b&#39;, &#39;c&#39;), (&#39;c&#39;, &#39;a&#39;), (&#39;c&#39;, &#39;b&#39;)]</span>
</span></span></code></pre></div><p>The function takes an iterable and another optional argument specifying the length of one permutation.</p><h3 id=getting-the-representation-of-an-object-as-a-string>Getting the representation of an object as a string<a hidden class=anchor aria-hidden=true href=#getting-the-representation-of-an-object-as-a-string>#</a></h3><p>Python has 2 methods to transform an object into a string (similar to other languages <code>toString()</code> methods); those are <code>str()</code> and <code>repr()</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>now</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>today</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>now</span><span class=p>))</span>     <span class=c1># prints &#39;2020-02-12&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>repr</span><span class=p>(</span><span class=n>now</span><span class=p>))</span>    <span class=c1># prints &#39;datetime.date(2020, 2, 12)&#39;</span>
</span></span></code></pre></div><p>The function <code>str()</code> is made for clarity, while the function <code>repr()</code> is made to be unambiguos about what the object represents.</p><p>The python console uses <code>repr()</code>.</p><h3 id=python-disassembler>Python disassembler<a hidden class=anchor aria-hidden=true href=#python-disassembler>#</a></h3><p>Python has a built-in disassembler. It is very rudimentary, but it can help debug some code.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>dis</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>text</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;This is some text </span><span class=se>\&#39;</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>text</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;</span><span class=se>\&#39;</span><span class=s1>.&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>dis</span><span class=o>.</span><span class=n>dis</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#  4           0 LOAD_CONST               1 (&#34;This is some text &#39;&#34;)</span>
</span></span><span class=line><span class=cl><span class=c1>#              2 LOAD_GLOBAL              0 (str)</span>
</span></span><span class=line><span class=cl><span class=c1>#              4 LOAD_FAST                0 (text)</span>
</span></span><span class=line><span class=cl><span class=c1>#              6 CALL_FUNCTION            1</span>
</span></span><span class=line><span class=cl><span class=c1>#              8 BINARY_ADD</span>
</span></span><span class=line><span class=cl><span class=c1>#             10 LOAD_CONST               2 (&#34;&#39;.&#34;)</span>
</span></span><span class=line><span class=cl><span class=c1>#             12 BINARY_ADD</span>
</span></span><span class=line><span class=cl><span class=c1>#             14 RETURN_VALUE</span>
</span></span></code></pre></div><p>More info <a href=https://docs.python.org/3/library/dis.html>in the docs</a>.</p><h3 id=lambda-functions>Lambda functions<a hidden class=anchor aria-hidden=true href=#lambda-functions>#</a></h3><p>Lambda functions, as in other functional programming languages, are anonymous functions that don&rsquo;t have a name. They are useful for small code that doesn&rsquo;t require more than a line or two, and they are generally passed as arguments to other functions.</p><p>One such example that applies to all functional programming languages is the <code>map()</code> function. It takes a callable as the first argument (read function, lambda function, something that can be called), and an iterable as the second argument, and applies the function to each of the elements of the iterable, returning a new iterable.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>obj</span> <span class=o>=</span> <span class=nb>map</span><span class=p>(</span><span class=k>lambda</span> <span class=n>string</span><span class=p>:</span> <span class=n>string</span><span class=o>.</span><span class=n>lower</span><span class=p>(),</span> <span class=p>[</span><span class=s1>&#39;StRiNg&#39;</span><span class=p>,</span> <span class=s1>&#39;ANOTHER string&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>obj</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># prints [&#39;string&#39;, &#39;another string&#39;]</span>
</span></span></code></pre></div><p>This code does the exact same thing:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>stringlower</span><span class=p>(</span><span class=n>string</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>string</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>lst</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;StRiNg&#39;</span><span class=p>,</span> <span class=s1>&#39;ANOTHER string&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>obj</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>lst</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>obj</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>stringlower</span><span class=p>(</span><span class=n>item</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># prints [&#39;string&#39;, &#39;another string&#39;]</span>
</span></span></code></pre></div><p>Another example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>power_func</span> <span class=o>=</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>x</span> <span class=o>**</span> <span class=n>y</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>power_func</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span> <span class=c1># prints 8</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x</span> <span class=o>=</span> <span class=p>(</span><span class=k>lambda</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>:</span> <span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>)(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>   <span class=c1># prints 1</span>
</span></span></code></pre></div><h3 id=ip-addresses-in-python>Ip addresses in Python<a hidden class=anchor aria-hidden=true href=#ip-addresses-in-python>#</a></h3><p>Python has an interesting module to work with Ip addresses:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>ipaddress</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>address</span> <span class=o>=</span> <span class=n>ipaddress</span><span class=o>.</span><span class=n>ip_address</span><span class=p>(</span><span class=s1>&#39;192.168.100.14&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>repr</span><span class=p>(</span><span class=n>address</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># prints IPv4Address(&#39;192.168.100.14&#39;)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># you can even have arithmetic operations done on this address</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>address</span> <span class=o>+</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># prints 192.168.100.17</span>
</span></span></code></pre></div><p>More info <a href=https://docs.python.org/3/library/ipaddress.html>here</a>.</p><h3 id=subclasses-and-subinstances>Subclasses and subinstances<a hidden class=anchor aria-hidden=true href=#subclasses-and-subinstances>#</a></h3><p>In Python, you can check if a class is a subclass of some other class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>BaseClass</span><span class=p>():</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SubClass</span><span class=p>(</span><span class=n>BaseClass</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>issubclass</span><span class=p>(</span><span class=n>SubClass</span><span class=p>,</span> <span class=n>BaseClass</span><span class=p>))</span>  <span class=c1># prints True</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>issubclass</span><span class=p>(</span><span class=n>SubClass</span><span class=p>,</span> <span class=nb>object</span><span class=p>))</span>     <span class=c1># prints True</span>
</span></span></code></pre></div><p>You can also check if some instance is an instance of the specified class or another sublass of that class:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>BaseClass</span><span class=p>():</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>SubClass</span><span class=p>(</span><span class=n>BaseClass</span><span class=p>):</span> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>obj</span> <span class=o>=</span> <span class=n>SubClass</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>isinstance</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>BaseClass</span><span class=p>))</span>   <span class=c1># prints True</span>
</span></span></code></pre></div><h3 id=asterisk--and-slash--in-function-definition-positional--and-keyword-only-function-parameters>Asterisk (*) and slash (\) in function definition (positional- and keyword-only function parameters)<a hidden class=anchor aria-hidden=true href=#asterisk--and-slash--in-function-definition-positional--and-keyword-only-function-parameters>#</a></h3><p>In Python 3, you can add an asterisk and a slash to a function definition with special meaning. Asterisk marks keyword-only parameters (that means parameters that can be given to the function just by keyword, not by position), while slash marks positional-only parameters (meaning parameters cannot be given by keyword, but by position only).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>positional_only_argument</span><span class=p>,</span> <span class=o>/</span><span class=p>,</span> <span class=n>positional_and_keyword_argument</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>keyword_only_argument</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>positional_only_argument</span> <span class=o>+</span> <span class=n>positional_and_keyword_argument</span> <span class=o>+</span> <span class=n>keyword_only_argument</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>func</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># Type error, third parameter should be keyword</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>func</span><span class=p>(</span><span class=n>positional_only_argument</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># Type error, first parameter is positional only</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>func</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=n>keyword_only_argument</span> <span class=o>=</span> <span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># fine, prints 6</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>func</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>positional_and_keyword_argument</span> <span class=o>=</span> <span class=mi>2</span><span class=p>,</span> <span class=n>keyword_only_argument</span> <span class=o>=</span> <span class=mi>3</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1># fine, prints 6</span>
</span></span></code></pre></div><p>Info and rationale about these 2 types of parameters can be found in <a href=https://www.python.org/dev/peps/pep-3102/>PEP 3102 - keyword-only parameters</a> and in <a href=https://www.python.org/dev/peps/pep-0570/>PEP 570 - positional-only parameters</a>.</p><p><strong>Note:</strong> Until Python 3.8, positional-only arguments could only be used in library functions. Starting from Python 3.8, they can be used in programmer constructions too.</p><h3 id=python-interactive-shell>Python interactive shell<a hidden class=anchor aria-hidden=true href=#python-interactive-shell>#</a></h3><p>Say you wrote some Python code like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>min</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=k>if</span> <span class=n>a</span> <span class=o>&lt;</span> <span class=n>b</span> <span class=k>else</span> <span class=n>b</span>
</span></span></code></pre></div><p>You can launch it in an interactive shell with <code>python -i main.py</code>, which is similar to calling only <code>python</code> in the command line, with the key difference that the python shell contains your function in the global scope as well. Go ahead, try it!</p><h3 id=python-debugger>Python debugger<a hidden class=anchor aria-hidden=true href=#python-debugger>#</a></h3><p>Python has a debugger, similar to gdb. One way to use it is to simply add <code>import pdb; pdb.set_trace()</code> in your program wherever u want the debugger to stop program execution.</p><p>In Python 3.7, the debugger can also be called on a script like this: <code>python -m pdb script.py</code>, and it stops when the module loads, just before executing the first line of the script.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>add</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pdb</span>
</span></span><span class=line><span class=cl><span class=n>pdb</span><span class=o>.</span><span class=n>set_trace</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># code execution will stop here, and the program will enter the debugger</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>add</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
</span></span></code></pre></div><p>For more information on how to operate the python debugger, visit <a href=https://docs.python.org/3/library/pdb.html#debugger-commands>this</a>.</p><p><strong>Note:</strong> Since Python 3.7, instead of <code>import pdb; pdb.set_trace()</code>, you can simply add a <code>breakpoint()</code> function call whenever you want the program to stop execution.</p><h3 id=the-walrus-operator->The walrus operator (:=)<a hidden class=anchor aria-hidden=true href=#the-walrus-operator->#</a></h3><p>Python 3.8 introduced assignment expressions through the use of a new operator, called the walrus operator (if you look sideways, the operator looks like a walrus).</p><p>Assignment expressions allow you to assign and return a value in the same expression, similar to how things work in a language like C.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=n>x</span> <span class=o>:=</span> <span class=nb>int</span><span class=p>(</span><span class=nb>input</span><span class=p>(</span><span class=s2>&#34;What is your age?&#34;</span><span class=p>)))</span> <span class=o>&gt;</span> <span class=mi>18</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;You are a grown-up!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;You are a kid!&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>It can be useful, for example in list comprehensions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>lst</span> <span class=o>=</span> <span class=p>[</span><span class=n>y</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=s1>&#39;abcd&#39;</span> <span class=k>if</span> <span class=p>(</span><span class=n>y</span> <span class=o>:=</span> <span class=n>f</span><span class=p>(</span><span class=n>x</span><span class=p>))</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1># instead of having to compute f(x) twice</span>
</span></span><span class=line><span class=cl><span class=n>lst</span> <span class=o>=</span> <span class=p>[</span><span class=n>f</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=s1>&#39;abcd&#39;</span> <span class=k>if</span> <span class=n>f</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>]</span>
</span></span></code></pre></div><p>Arguably, the operator is a little confusing, and most of the times not needed and can be replaced with more expressive syntax. There are good arguments to why this operator is not needed in Python <a href=https://www.reddit.com/r/Python/comments/8ex72p/pep_572_assignment_expressions/>here</a>.</p><p>Nonetheless, Python 3.8 adopted assignment expressions through the use of the walrus operator :=.</p><p>For more info on the walrus operator and assignment expressions, see <a href=https://www.python.org/dev/peps/pep-0572/>PEP 572</a>.</p><h3 id=formatted-strings-f-strings>Formatted strings (f-strings)<a hidden class=anchor aria-hidden=true href=#formatted-strings-f-strings>#</a></h3><p>Formatted string literals (or f-strings) are a construct added in Python 3.6 and have since become very popular due to the speed (see tip 7) and simplicity.</p><p>Some examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>number</span> <span class=o>=</span> <span class=mf>3.1415</span>
</span></span><span class=line><span class=cl><span class=n>width</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=n>precision</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;This is </span><span class=si>{</span><span class=n>number</span><span class=si>:{</span><span class=n>width</span><span class=si>}</span><span class=s1>.</span><span class=si>{</span><span class=n>precision</span><span class=si>}}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># prints</span>
</span></span><span class=line><span class=cl><span class=c1># This is       3.14</span>
</span></span></code></pre></div><p>There are three conversion fields; <code>r</code>, <code>s</code> and <code>a</code>. What they do is call the functions <code>repr()</code>, <code>str()</code> and <code>ascii()</code> respectively on the formatted parameter.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;Alex&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;My name is </span><span class=si>{</span><span class=n>name</span><span class=si>!r}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># prints</span>
</span></span><span class=line><span class=cl><span class=c1># My name is &#39;Alex&#39;</span>
</span></span></code></pre></div><p>Since Python 3.8, there is a new specifier (=), that expands to the representation of the expression, making it useful for debugging and self-documenting.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;Alex&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>name</span><span class=si>=}</span><span class=s1>&#39;</span><span class=p>)</span>               <span class=c1># prints name=&#39;Alex&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>now</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>date</span><span class=o>.</span><span class=n>today</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>now</span><span class=si>=}</span><span class=s1>&#39;</span><span class=p>)</span>                <span class=c1># prints now=datetime.date(2020, 2, 14)</span>
</span></span><span class=line><span class=cl><span class=c1># f-string specifiers still work</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>now</span><span class=si>=!s}</span><span class=s1>&#39;</span><span class=p>)</span>              <span class=c1># prints now=2020-02-14</span>
</span></span><span class=line><span class=cl><span class=n>number</span> <span class=o>=</span> <span class=mf>3.1415</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Careful when adding format specifiers</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>number</span> <span class=o>+</span> <span class=mi>1</span><span class=si>=:</span><span class=s1>10.2f</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>   <span class=c1># prints number + 1=      4.14</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;</span><span class=si>{</span><span class=n>number</span> <span class=o>+</span> <span class=mi>1</span><span class=si>=:</span><span class=s1>10.2</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>    <span class=c1># prints number + 1=       4.1</span>
</span></span></code></pre></div><p>More info about f-strings <a href=https://docs.python.org/3/reference/lexical_analysis.html#f-strings>in the docs</a>.</p><p><strong>Note:</strong> Formatted strings have a &lsquo;formatting&rsquo; option similar to how <code>printf()</code> works in other languages. Python&rsquo;s implementation of formatted print is <a href=https://docs.python.org/3/library/string.html#format-specification-mini-language>a little more advanced though</a>.</p><h3 id=decorators-and-the-functoolswraps-helper-function>Decorators and the functools.wraps helper function<a hidden class=anchor aria-hidden=true href=#decorators-and-the-functoolswraps-helper-function>#</a></h3><p>Say you have a function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>sum</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;This function adds 2 numbers and returns the result.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
</span></span></code></pre></div><p>But now we want to log this function call. Of course, adding this code in the implementation of the function is bad, since we&rsquo;re polluting the function code. Even more so, what if we want to log another 10 function calls?</p><p>For this purpose, we can easily use a decorator.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>log</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Wrapper function.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># do some logging</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapper</span>
</span></span></code></pre></div><p>Now it is easy to use the decorator on whatever function we want to log.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@log</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>sum</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;This function adds 2 numbers and returns the result.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>))</span> <span class=c1># this function call will be logged</span>
</span></span></code></pre></div><p>However, one problem arises when decorating a function like this. If we now try to get the doc or the function name, we notice that we get the information of the wrapper function, rather than that of our initial function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>)</span>      <span class=c1># prints &#34;Wrapper function&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>     <span class=c1># prints &#34;wrapper&#34;</span>
</span></span></code></pre></div><p>This is not ideal, considering that debuggers and other introspection tools use this. To fix this, we can use functools.wraps.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>functools</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>log</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@functools</span><span class=o>.</span><span class=n>wraps</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Wrapper function.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># do some logging</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapper</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@log</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>sum</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;This function adds 2 numbers and returns the result.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>)</span>      <span class=c1># prints &#34;This function adds 2 numbers and returns the result.&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>sum</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>     <span class=c1># prints &#34;sum&#34;</span>
</span></span></code></pre></div><h3 id=static-function-variables>Static function variables<a hidden class=anchor aria-hidden=true href=#static-function-variables>#</a></h3><p>Python does not have a built-in method to have a static variable in a function like C or other languages do through the use of the <code>static</code> keyword.</p><p>Instead, we can use the fact that functions are first-class objects in Python and we can assign variables to them.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>func</span><span class=o>.</span><span class=n>number_of_times_called</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>func</span><span class=o>.</span><span class=n>number_of_times_called</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=c1># some really interesting code</span>
</span></span></code></pre></div><p>This is better than having a global variable pollute the global namespace, and is better than having a decorator that does that (because the decorator runs when the python module is loaded even if the function might never be called, so the decorator will still do some work and initialize some value; instead here the code runs only when the function is called, if ever).</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://shenlong616.github.io/tags/python/>python</a></li><li><a href=https://shenlong616.github.io/tags/python3/>python3</a></li><li><a href=https://shenlong616.github.io/tags/python-tricks/>python tricks</a></li><li><a href=https://shenlong616.github.io/tags/python-tips/>python tips</a></li></ul><nav class=paginav><a class=prev href=https://shenlong616.github.io/posts/github/asabeneh/javascript-for-everyone/><span class=title>« Prev</span><br><span>JavaScript for Everyone</span></a>
<a class=next href=https://shenlong616.github.io/posts/github/catalinpit/js-tips-and-tricks/><span class=title>Next »</span><br><span>JAVASCRIPT TIPS & TRICKS 🔥🚀⚡</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://shenlong616.github.io/>Shenlong616</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>document.addEventListener("DOMContentLoaded",()=>{const e=e=>{NProgress.set(e),NProgress.done(!0)};if(e(.1),document.getElementsByTagName("input").length>0)for(const t of document.getElementsByTagName("input"))t.addEventListener("input",()=>{e(.1)});else void this;if(document.querySelectorAll(".copy-code, .top-link, #theme-toggle").length>0)for(const t of document.querySelectorAll(".copy-code, .top-link, #theme-toggle"))t.addEventListener("click",()=>{e(.1)});else void this;const t=e=>e[Math.floor(Math.random()*e.length)];if(ScrollReveal().noop)void this;else{const e={desktop:!0,mobile:!1,delay:0,duration:300,easing:"ease-out",reset:!0,distance:"6.16%",origin:"bottom",delay:0,beforeReveal:()=>{},afterReveal:()=>{}},n=()=>{const e=document.createElement("span"),n=document.createTextNode(`${Object.values(t([{Bengali:"নমস্কার!"},{boro:"खुलुम्बाइ!"},{Bulgarian:"Здравей!"},{Chinese:"你好!"},{Croat:"Zdravo!"},{Czech:"Ahoj!"},{Danish:"Hej!"},{Dutch:"Hallo!"},{English:"Hello!"},{Esperanto:"Saluton!"},{Estnisch:"Tere!"},{Farsi:"Salam!"},{Fidschi:"Bula!"},{Finnish:"Terve!"},{Flemish:"Hallo!"},{French:"Salut!"},{Greek:"Γειά!"},{Hawaiian:"Aloha!"},{Hebrew:"!שלום"},{Hindi:"नमस्ते!"},{Italian:"Ciao!"},{Japanese:"こんにちは!"},{Khmer:"Tchum-reaup Suw!"},{Korean:"안영하세요!"},{Lettish:"Čau!"},{Lithuanian:"Labas!"},{Malaiisch:"Hai!"},{Mongolian:"Сайн уу!"},{Norwegian:"Hei!"},{Polish:"Cześć!"},{Portuguese:"Olá!"},{Rumanian:"Salut!"},{Russian:"Привет!"},{Slovak:"Ahoj!"},{Spanish:"Hola!"},{Swedish:"Hej!"},{Swiss_German:"Hoi!"},{Tamil_Nadu:"வணக்கம்!"},{Thai:"สวัสดีคะ!"},{Turkish:"Merhaba!"},{Vietnamese:"Xin Chào!"}]))[0]}`);e.appendChild(n),Object.assign(e.style,{color:"var(--secondary)",fontSize:"0.6789em"}),document.querySelector(".logo").appendChild(e)};n(),ScrollReveal().reveal(document.querySelectorAll(".logo")[0].childNodes[0],{...e}),ScrollReveal().reveal(document.querySelectorAll(".logo")[0].childNodes[1],{...e,delay:e.delay+=25}),ScrollReveal().reveal(document.querySelectorAll(".logo")[0].childNodes[2],{...e,delay:e.delay+=25});for(const t of document.querySelectorAll("ul#menu")[0].childNodes)ScrollReveal().reveal(t,{...e,delay:e.delay+=25,origin:"left"})}async function n(){const e=await fetch("/../../assets/js/json/quotes.json?v=0.3.2"),n=await e.json();if(e.ok){const e=t(n);document.getElementsByName("quoteAuthor")[0].textContent=e.author,document.getElementsByName("quoteContent")[0].textContent=e.content}else void this}document.getElementsByName("quoteAuthor")[0]===void 0&&document.getElementsByName("quoteContent")[0]===void 0?void this:n()})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>